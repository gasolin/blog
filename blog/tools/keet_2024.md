---
title: Keet 聊天應用程式介紹，與它解決了哪些 P2P 聊天應用的問題
tags:
  - tool
date: 2024-11-27 12:15:31
---

[Keet](https://keet.io) 是一款很年輕的聊天應用程式，讓你可以直接和朋友進行視訊和文字聊天。它有幾個特點：

- 私密和安全：Keet 使用端到端加密，確保只有你和你的朋友能看到聊天內容，這比 Line 的安全性更高。

- 高品質視訊通話：Keet 的視訊通話品質非常好，因為它不使用伺服器，而是直接連接你和朋友的設備。當然你也可以只使用語音通話。

- 快速分享大文件：你可以分享大文件或是畫質無損的圖片、影像。

這些功能使 Keet 成為一個更安全、更高效的通訊工具，特別適合那些重視隱私和需要高品質通話的使用者。

### Keet 和其他聊天應用程式相較，為什麼能更安全呢？

大多數聊天應用程式（例如 Line）使用的是「伺服器-客戶端」（Server-Client）架構。這意味著當你發送訊息時，訊息會先傳到伺服器（Server），然後再從伺服器傳送到你的朋友（Client）。這樣的好處是訊息傳遞速度快，但也有一些風險：

- 伺服器可能被駭客攻擊：如果伺服器被駭客攻擊，所有存儲在伺服器上的訊息都有可能被竊取。
- 隱私問題：伺服器擁有你所有的聊天記錄，這意味著你的隱私可能會被侵犯。中國的微信等聊天應用程式甚至會審查你的聊天內容，在聊天室中無法輸入或搜尋敏感詞彙。
- 帳號禁用風險：伺服器可以控制你的帳號，如果伺服器認為你違反了規則，它可以禁用你的帳號，讓你無法使用服務。
- 單點故障：如果伺服器發生故障，整個系統可能會無法運行，導致所有用戶無法使用服務。
- 維運經費：伺服器需要持續的維護和運營，這包括硬體設備的更新、伺服器的運行成本以及技術支持等，這些都需要大量的資金投入。

Keet 使用的是點對點（Peer-to-Peer, P2P）架構。這意味著當你發送訊息時，訊息會直接從你的設備傳送到朋友的設備，中間不經過伺服器。這樣的好處是：

- 更高的安全性：因為沒有中央伺服器，駭客無法透過攻擊伺服器來竊取訊息。
- 更好的隱私保護：你的訊息經過加密，只有你和你的朋友能看到。
- 無帳號禁用風險：因為沒有中央伺服器控制你的帳號，你不會因為違反規則而被禁用帳號。
- 較低的維運經費：由於沒有中央伺服器，維護和運營的成本較低。
- 較少的單點故障：因為沒有中央伺服器，系統不會因為單一伺服器的故障而導致整個系統無法運行。

總結來說，Keet 的 P2P 架構讓它比使用伺服器-客戶端架構的聊天應用程式更安全，因為它減少了訊息被竊取、隱私被侵犯和帳號被禁用的風險。

### 聊天應用程式使用 P2P 架構的缺點

這麼說起來，使用 P2P 架構的 Keet，具備許多目前聊天應用程式所沒有的優點，那麼為什麼現有的聊天應用程式都不是 P2P 架構？

讓我們來看看使用 P2P 架構在即時通訊（IM）中的缺點：

- 需要同時上線：在 P2P 架構下，雙方必須同時在線才能進行通訊。這意味著如果你想和朋友聊天，對方必須也在線上，否則你們無法即時交流。這對於需要隨時隨地發送和接收訊息的用戶來說，可能會帶來不便。
- 使用者識別：當使用者透過多個設備發送訊息時，難以確保這些訊息都屬於同一個使用者。
- 訊息傳遞延遲：由於 P2P 架構依賴於雙方的直接連接，如果其中一方的網絡不穩定，訊息的傳遞可能會延遲或失敗。這對於需要即時回應的情況來說，可能會影響使用體驗。
- 檔案傳輸限制：在 P2P 架構下，檔案傳輸也需要雙方同時在線。如果你想發送檔案給朋友，但對方不在線，你的檔案無法即時傳送，這對於需要快速分享檔案的用戶來說，可能會造成困擾。
- 連接穩定性：P2P 依賴於用戶之間的直接連接，如果其中一方的網絡不穩定，通訊質量可能會受到影響。這意味著如果你的朋友的網絡不好，你們的聊天可能會卡頓或中斷。
- 資源消耗：P2P 需要每個用戶的設備來處理和傳輸數據，這可能會增加設備的電池消耗和數據使用量。對於手機用戶來說，這可能會導致電池更快耗盡。
- 難以管理：由於沒有中央伺服器，管理和監控 P2P 網絡可能會更加困難，特別是在需要進行故障排除或維護時。亦即如果出現問題，找出問題所在並解決它可能會比較麻煩。


### Keet 如何克服 P2P 架構的缺點

開發 keet.io 的 [holepunch](https://holepunch.to/) 公司，已在 P2P 相關領域打磨多年，很瞭解 P2P 架構的限制。因此結合了加密技術與 P2P，提出了 Identity、Blind-paring 與 Blind Mirror 等技術，來提升 P2P 架構在即時通訊等領域的實用性。

#### 解決需要同時上線問題

讓我們來看看 Blind-paring 和 Blind Mirror 的概念。

Blind-paring 是一種透過加密技術來管理加入聊天室請求的方法。具體過程如下：

- 請求保存：當用戶 A 想要加入某個聊天室時，這個請求會被加密並保存到某個 peer 上。
- 管理者批准：當聊天室的管理者 B 上線時，可以對這個請求進行簽名批准。
- 用戶加入：當用戶 A 上線時，經過批准的請求會允許 A 加入聊天室。

這些請求雖然保存在某個 peer 上，但這個 peer 並沒有 A 或 B 的金鑰，因此無法解密查看具體的請求內容。

Blind Mirror 是 Blind-paring 的檔案版本。具體過程如下：

- 檔案保存：當使用者 A 傳送了一個檔案後，這個檔案會被加密並保存到某些 peer 上。
- 持續存取：即使使用者 A 離線了，這個檔案仍然能被其他人存取。
- 隱私保護：保存檔案的 peer 沒有解密的金鑰，因此無法查看檔案內容。

這兩種技術都利用了加密技術來保護使用者的隱私和數據安全，確保即使數據保存在其他 peer 上，也無法被未授權的使用者查看。

#### 解決使用者識別問題

在 P2P 架構中，每個 peer（節點）都是平等的。當使用者透過多個設備發送訊息時，如何確保這些訊息都屬於同一個使用者，並讓使用者能夠編輯或刪除來自不同設備的訊息呢？

Keet 借鑑了加密貨幣的技術，加入了 ID（身份）的概念。具體來說，Keet 使用了 24 個助記詞來創建一個唯一的身份（ID）。這些助記詞就像是一組密碼，能夠幫助識別和驗證使用者。

- 身份識別：當使用者在不同設備上發送訊息時，這些設備都會使用相同的 ID 來確認身份。這樣，即使使用不同的設備，系統也能知道這些訊息來自同一個使用者。
- 訊息管理：使用者可以編輯或刪除來自不同設備的訊息，因為所有訊息都與同一個身份（ID）相關聯。

資訊揭露：我目前正負責 Keet Mobile 客戶端開發，因此得以從側邊了解整個架構。Keet 使用到的大多數 package 都開源在 https://github.com/holepunchto ，也可以查看我維護的 [Awesome-pears](https://github.com/gasolin/awesome-pears) 列表，裡面有除了 Keet 之外其他的 P2P 應用。
