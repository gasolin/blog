<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">The newbie&#x27;s workflow on Mozilla Gecko project | 蓋索林 Gasolin</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://blog.gasolin.idv.tw/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="The newbie&#x27;s workflow on Mozilla Gecko project | 蓋索林 Gasolin"><meta data-rh="true" name="description" content="As our recent development focus shifting from Firefox OS to Firefox, we need to contribute to gecko repository directly instead of contributing to Gaia repository on Github."><meta data-rh="true" property="og:description" content="As our recent development focus shifting from Firefox OS to Firefox, we need to contribute to gecko repository directly instead of contributing to Gaia repository on Github."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2016-08-09T06:35:24.000Z"><meta data-rh="true" property="article:tag" content="Mozilla"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.gasolin.idv.tw/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project"><link data-rh="true" rel="alternate" href="https://blog.gasolin.idv.tw/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project" hreflang="en"><link data-rh="true" rel="alternate" href="https://blog.gasolin.idv.tw/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="蓋索林 Gasolin RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="蓋索林 Gasolin Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2833924-9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-2833924-9",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.94df118e.css">
<script src="/assets/js/runtime~main.1cb2238c.js" defer="defer"></script>
<script src="/assets/js/main.577036e3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/avatar.jpg" alt="gasolin blog" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/avatar.jpg" alt="gasolin blog" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">蓋索林 Gasolin</b></a><a href="https://gasolin.idv.tw/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/tags">Tags</a><a class="navbar__item navbar__link" href="/life/mylifetools">我的工具箱</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/life/self-agent">用自己的代理（SelfAgent），讀自己的資料</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/life/2026-how-i-treat-ai">器靈與技能魔石 - 我如何看待 AI (2026)</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/life/my-investment-2025">這一年的投資 (2025)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/service/p2p-and-dht">不用伺服器也能通訊？P2P 聊天 App 的啟動魔法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/tools/ollama">使用 Ollama 與 Holesail 遠端運行本地模型</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">The newbie&#x27;s workflow on Mozilla Gecko project</h1><div class="container_mt6G margin-vert--md"><time datetime="2016-08-09T06:35:24.000Z">August 9, 2016</time> · <!-- -->6 min read</div></header><div id="__blog-post-container" class="markdown"><p>As our recent development focus shifting from Firefox OS to Firefox, we need to contribute to gecko repository directly instead of contributing to Gaia repository on Github.
The most of the works are related to Javascript. The main change is the workflow and API difference.  In Gaia we work between Bugzilla and Github; In gecko, we have Bugzilla and mozReview.</p>
<p>Once you have setup the environment, the workflow could also be based on git(or hg), and most things are dealt automatically.
Mozilla is a pretty open workplace so that I can share my workflow with the world. Here is a reference to how I did for per patch/weekly/per setup/one-time workflow.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="do-it-one-time">Do it One time<a href="#do-it-one-time" class="hash-link" aria-label="Direct link to Do it One time" title="Direct link to Do it One time" translate="no">​</a></h2>
<p>To become a mozilla committer, read <a href="https://www.mozilla.org/en-US/about/governance/policies/commit/" target="_blank" rel="noopener noreferrer" class="">https://www.mozilla.org/en-US/about/governance/policies/commit/</a></p>
<p>Create Bugzilla API key<a href="https://bugzilla.mozilla.org/userprefs.cgi?tab=apikey" target="_blank" rel="noopener noreferrer" class="">https://bugzilla.mozilla.org/userprefs.cgi?tab=apikey</a>
and ssh key <a href="https://login.mozilla.com/ssh_keys_index" target="_blank" rel="noopener noreferrer" class="">https://login.mozilla.com/ssh_keys_index</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="do-at-every-setup">Do at every Setup<a href="#do-at-every-setup" class="hash-link" aria-label="Direct link to Do at every Setup" title="Direct link to Do at every Setup" translate="no">​</a></h2>
<p>You may check MDN as a start point, with Developer Guide <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide" target="_blank" rel="noopener noreferrer" class="">https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide</a> and especially the source code page
<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Source_Code" target="_blank" rel="noopener noreferrer" class="">https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Source_Code</a></p>
<p>I will do the setup flow every time I got a new laptop.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-update-git">1. Update git<a href="#1-update-git" class="hash-link" aria-label="Direct link to 1. Update git" title="Direct link to 1. Update git" translate="no">​</a></h3>
<p>Use the <a href="https://launchpad.net/%7Egit-core/+archive/ubuntu/ppa" target="_blank" rel="noopener noreferrer" class="">PPA</a> from the maintainers of <code>git</code> on Ubuntu:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo apt-add-repository ppa:git-core/ppa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo apt-get install git</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-install-git-cinnabar">2. Install git-cinnabar<a href="#2-install-git-cinnabar" class="hash-link" aria-label="Direct link to 2. Install git-cinnabar" title="Direct link to 2. Install git-cinnabar" translate="no">​</a></h3>
<p>Gecko itself managed via mercurial, we need install <a href="https://github.com/glandium/git-cinnabar" target="_blank" rel="noopener noreferrer" class="">git-cinnabar</a> to help us deal with mercurial codebase via git.Check <a href="http://mozilla-version-control-tools.readthedocs.org/en/latest/mozreview/install-git.html#mozreview-install-git" target="_blank" rel="noopener noreferrer" class="">http://mozilla-version-control-tools.readthedocs.org/en/latest/mozreview/install-git.html#mozreview-install-git</a> `<a href="https://github.com/glandium/git-cinnabar/wiki/Mozilla:-A-git-workflow-for-Gecko-development" target="_blank" rel="noopener noreferrer" class=""></a></p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo apt-get install mercurial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git clone https://github.com/glandium/git-cinnabar.git</span><br></span></code></pre></div></div>
<p>Then set git-cinnabar into system PATH,</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ gedit ~/.bashrc</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:absolute_path_to/git-cinnabar</span><br></span></code></pre></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ . ~/.bashrc</span><br></span></code></pre></div></div>
<p>And do <code>git cinnabar download</code> to get the faster helper.</p>
<p>Then follow `<a href="https://github.com/glandium/git-cinnabar/wiki/Mozilla:-A-git-workflow-for-Gecko-development" target="_blank" rel="noopener noreferrer" class="">Mozilla: A git workflow for Gecko development</a> to checkout gecko via git.</p>
<p>Make sure you follow the Firefox build guide <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_build" target="_blank" rel="noopener noreferrer" class="">https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_build</a> to setup Firefox build environment.</p>
<p>You can <code>install style check related libraries via the following command:</code></p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach eslint --setup</span><br></span></code></pre></div></div>
<p>You may want install mozreview which improves the overall experience of review with Bugzilla<a href="http://mozilla-version-control-tools.readthedocs.org/en/latest/mozreview/install.html" target="_blank" rel="noopener noreferrer" class=""> http://mozilla-version-control-tools.readthedocs.org/en/latest/mozreview/install.html</a><code> </code></p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach mercurial-setup</span><br></span></code></pre></div></div>
<p>Will clone <code>version-control-tools</code> into <code>~/.mozbuild/version-control-tools</code>. We need update system PATH</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ gedit ~/.bashrc</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:absolute_path_to/git-cinnabar:/path/to/.mozbuild/version-control-tools/git/commands</span><br></span></code></pre></div></div>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ . ~/.bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git config --global bz.username gasolin@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git config --global bz.apikey [your bugzilla key]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git config --global mozreview.nickname gasolin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git mozreview configure</span><br></span></code></pre></div></div>
<p>Then, run bootstrap script to install required build environment,</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach bootstrap</span><br></span></code></pre></div></div>
<p>Then, <strong>the most time-saving advice</strong>: setup mozconfig for <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Artifact_builds" target="_blank" rel="noopener noreferrer" class="">artifact builds</a> if possible. When you only work for front-end related work (non c++), Artifact build will download compiled platform code to save you lots of build time.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="weekly-workflow">Weekly workflow<a href="#weekly-workflow" class="hash-link" aria-label="Direct link to Weekly workflow" title="Direct link to Weekly workflow" translate="no">​</a></h2>
<p>Previously build takes more time, I usually do the following command only twice a week if necessary. But now we can use artifact build, which is pretty fast and can be done many times a day.</p>
<p>We need update Gecko repository regularly:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git remote update</span><br></span></code></pre></div></div>
<p>Then merge recent updates into current repo with</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git rebase central/default</span><br></span></code></pre></div></div>
<p>Checkout a new bug and then rebuild the stack,</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach build</span><br></span></code></pre></div></div>
<p>The command will compile the whole gecko.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="per-patch-workflow">Per patch workflow<a href="#per-patch-workflow" class="hash-link" aria-label="Direct link to Per patch workflow" title="Direct link to Per patch workflow" translate="no">​</a></h2>
<p>When I work on a new bug, I&#x27;ll checkout a new branch (on mac)</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout -b bugxxxxxxx central/branches/default/tip</span><br></span></code></pre></div></div>
<p>or (on Ubuntu)</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout -b bugxxxxxxx mozilla/central</span><br></span></code></pre></div></div>
<p>Usually, the bug is focused on a component of gecko, such as <code>browser/components/customizableui</code>. To make .js/.jsm changes work, we don&#x27;t need to rebuild gecko. But to make some C++ code or new test code works, we need to rebuild this part of source via</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach build browser/components/customizableui</span><br></span></code></pre></div></div>
<p>Once we have some progress for the patch, we can test code via the command:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach test browser/components/customizableui/test</span><br></span></code></pre></div></div>
<p>You need to make sure you&#x27;ve followed the JS code style <a href="https://wiki.mozilla.org/DevTools/CodingStandards#Code_style" target="_blank" rel="noopener noreferrer" class="">https://wiki.mozilla.org/DevTools/CodingStandards#Code_style </a>and CSS code style <a href="https://wiki.mozilla.org/Firefox/CSS_Tips" target="_blank" rel="noopener noreferrer" class="">https://wiki.mozilla.org/Firefox/CSS_Tips</a>. Do the eslint test before commit to make sure the patch does not contain some obvious syntax error.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./mach eslint browser/components/customizableui/test</span><br></span></code></pre></div></div>
<p>Once the patch is ready, commit it as normal git commit, with a <a href="http://mozilla-version-control-tools.readthedocs.org/en/latest/mozreview/commits.html#mozreview-commits" target="_blank" rel="noopener noreferrer" class="">structured syntax</a>:
<code>Bug xxxxxxx - description. ;r=?reviewer_bugzilla_alias</code>.</p>
<p>Then, use git mozreview command to push the commit onto Bugzilla for review.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git mozreview push</span><br></span></code></pre></div></div>
<p>You can use try chooser<a href="http://trychooser.pub.build.mozilla.org/" target="_blank" rel="noopener noreferrer" class=""> http://trychooser.pub.build.mozilla.org/</a> to select test suites that run automatically on the test server. Treeherder is Mozilla&#x27;s test server hosted on AWS (Amazon Web Service). Push code there and everyone will have the same base to validate if your code works well on anyone&#x27;s computer.</p>
<p>The reference try script (credit from :Gijs) for <code>browser/component</code> is</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try: -b od -t none -p win32,win64,macosx64,linux,linux64,linux64-asan -u mochitest-bc,mochitest-e10s-bc,marionette,marionette-e10s</span><br></span></code></pre></div></div>
<p>You can manipulate the script based on what you need to test.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="if-you-like-to-file-a-bug">If you like to file a bug<a href="#if-you-like-to-file-a-bug" class="hash-link" aria-label="Direct link to If you like to file a bug" title="Direct link to If you like to file a bug" translate="no">​</a></h2>
<ul>
<li class="">Assign priorities when filing new bugs that you&#x27;re going to work on in the component.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference" translate="no">​</a></h2>
<ul>
<li class=""></li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/mozilla">Mozilla</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/gasolin/blog/edit/main/website/blog/blog/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/iot/chatbot-slide"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">聊天機器人一份，不加咖啡</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/vr/upload-360photo-to-facebook"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">使用手機上傳 360 圖片到 Facebook</div></a></nav><div style="margin-top:20px"></div></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#do-it-one-time" class="table-of-contents__link toc-highlight">Do it One time</a></li><li><a href="#do-at-every-setup" class="table-of-contents__link toc-highlight">Do at every Setup</a><ul><li><a href="#1-update-git" class="table-of-contents__link toc-highlight">1. Update git</a></li><li><a href="#2-install-git-cinnabar" class="table-of-contents__link toc-highlight">2. Install git-cinnabar</a></li></ul></li><li><a href="#weekly-workflow" class="table-of-contents__link toc-highlight">Weekly workflow</a></li><li><a href="#per-patch-workflow" class="table-of-contents__link toc-highlight">Per patch workflow</a></li><li><a href="#if-you-like-to-file-a-bug" class="table-of-contents__link toc-highlight">If you like to file a bug</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Personal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.gasolin.idv.tw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://blog.gasolin.idv.tw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="http://www.mytravelmap.tk/u/gg112695256249584453237" target="_blank" rel="noopener noreferrer" class="footer__link-item">Traveled<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Career</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/gasolin" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 gasolin. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>