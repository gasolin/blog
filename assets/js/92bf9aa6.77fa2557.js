"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[26525],{28453(e,n,l){l.d(n,{R:()=>r,x:()=>d});var i=l(96540);const t={},s=i.createContext(t);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},85169(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>a});var i=l(97576),t=l(74848),s=l(28453);const r={title:"16.3. \u4f7f\u7528\u65b9\u6cd5",tags:["IPv6"],date:new Date("2005-03-27T00:27:10.000Z")},d=void 0,c={authorsImageUrls:[]},a=[{value:"16.3.1. \u78ba\u8a8d\u662f\u5426\u652f\u63f4",id:"1631-\u78ba\u8a8d\u662f\u5426\u652f\u63f4",level:2},{value:"16.3.2. \u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 ip6tables",id:"1632-\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528-ip6tables",level:2},{value:"16.3.2.1. \u5217\u51fa\u6240\u6709 IPv6 netfilter \u8f38\u5165\u689d\u4ef6",id:"16321-\u5217\u51fa\u6240\u6709-ipv6-netfilter-\u8f38\u5165\u689d\u4ef6",level:3},{value:"16.3.2.2. \u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668",id:"16322-\u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668",level:3},{value:"16.3.2.3. \u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247",id:"16323-\u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247",level:3},{value:"16.3.2.4. \u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6",id:"16324-\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6",level:3},{value:"16.3.2.5. \u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6",id:"16325-\u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6",level:3},{value:"16.3.2.6. \u5141\u8a31 ICMPv6 \u8a0a\u606f",id:"16326-\u5141\u8a31-icmpv6-\u8a0a\u606f",level:3},{value:"16.3.2.7. \u901f\u7387\u9650\u5236",id:"16327-\u901f\u7387\u9650\u5236",level:3}];function p(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"1631-\u78ba\u8a8d\u662f\u5426\u652f\u63f4",children:"16.3.1. \u78ba\u8a8d\u662f\u5426\u652f\u63f4"}),"\n",(0,t.jsx)(n.p,{children:"\u5617\u8a66\u8f09\u5165\u6a21\u7d44\uff0c\u78ba\u8a8d\u662f\u5426\u7de8\u8b6f\u6210\u529f"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# modprobe ip6_tables"})}),"\n",(0,t.jsx)(n.p,{children:"\u78ba\u8a8d\u76f8\u5bb9\u6027"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-#",metastring:"[ ! -f /proc/net/ip6_tables_names ] && echo \"Current kernel doesn't support",children:"\ufffd 'ip6tables' firewalling (IPv6)!\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"1632-\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528-ip6tables",children:"16.3.2. \u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 ip6tables"}),"\n",(0,t.jsx)(n.h3,{id:"16321-\u5217\u51fa\u6240\u6709-ipv6-netfilter-\u8f38\u5165\u689d\u4ef6",children:"16.3.2.1. \u5217\u51fa\u6240\u6709 IPv6 netfilter \u8f38\u5165\u689d\u4ef6"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u77ed\u6307\u4ee4"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables -L"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5ef6\u4f38\u6307\u4ee4\n",(0,t.jsx)(n.code,{children:"ip6tables -n -v --line-numbers -L"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"16322-\u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668",children:"16.3.2.2. \u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables -n -v --line-numbers -L INPUT"})}),"\n",(0,t.jsx)(n.h3,{id:"16323-\u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247",children:"16.3.2.3. \u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-#",metastring:'ip6tables --table filter --append INPUT  -j LOG --log-prefix "INPUT:"',children:"\ufffd --log-level 7\n"})}),"\n",(0,t.jsx)(n.h3,{id:"16324-\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6",children:"16.3.2.4. \u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables --table filter --append INPUT  -j DROP"})}),"\n",(0,t.jsx)(n.h3,{id:"16325-\u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6",children:"16.3.2.5. \u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables --table filter --delete INPUT 1"})}),"\n",(0,t.jsx)(n.h3,{id:"16326-\u5141\u8a31-icmpv6-\u8a0a\u606f",children:"16.3.2.6. \u5141\u8a31 ICMPv6 \u8a0a\u606f"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u8f03\u820a\u7684 Linux \u6838\u5fc3 (\u672a\u4fee\u6b63\u7684\u6838\u5fc3 2.4.5 \u8207 iptables-1.2.2) \u5c07\u7121\u6cd5\u6307\u5b9a\u985e\u578b (type)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u63a5\u53d7\u900f\u904e\u96a7\u9053 (Tunnel) \u9032\u4f86\u7684 ICMPv6 \u901a\u8a0a"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables -A INPUT -i sit+ -p icmpv6 -j ACCEPT"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u63a5\u53d7\u900f\u904e\u96a7\u9053 (Tunnel) \u51fa\u53bb\u7684 ICMPv6 \u901a\u8a0a"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables -A OUTPUT -o sit+ -p icmpv6 -j ACCEPT"})}),"\n",(0,t.jsx)(n.p,{children:"\u65b0\u7684 Linux \u6838\u5fc3\u53ef\u4ee5\u6307\u5b9a ICMPv6 \u985e\u578b:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"# ip6tables -A INPUT -p icmpv6 --icmpv6-type echo-request -j ACCEPT"})}),"\n",(0,t.jsx)(n.h3,{id:"16327-\u901f\u7387\u9650\u5236",children:"16.3.2.7. \u901f\u7387\u9650\u5236"}),"\n",(0,t.jsx)(n.p,{})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},97576(e){e.exports=JSON.parse('{"permalink":"/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5.md","source":"@site/blog/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5.md","title":"16.3. \u4f7f\u7528\u65b9\u6cd5","description":"16.3.1\\\\. \u78ba\u8a8d\u662f\u5426\u652f\u63f4","date":"2005-03-27T00:27:10.000Z","tags":[{"inline":true,"label":"IPv6","permalink":"/tags/i-pv-6"}],"readingTime":1,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"16.3. \u4f7f\u7528\u65b9\u6cd5","tags":["IPv6"],"date":"2005-03-27T00:27:10.000Z"},"unlisted":false,"prevItem":{"title":"3rd. day of porting INET6 \u7b2c\u4e09\u5929","permalink":"/ipv6/3rd-day-of-porting-INET6-\u7b2c\u4e09\u5929"},"nextItem":{"title":"16.2. \u6e96\u5099","permalink":"/ipv6/16-2-\u6e96\u5099"}}')}}]);