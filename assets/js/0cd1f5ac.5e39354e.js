"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[54062],{28453(e,t,o){o.d(t,{R:()=>i,x:()=>r});var a=o(96540);const s={},n=a.createContext(s);function i(e){const t=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(n.Provider,{value:t},e.children)}},87263(e,t,o){o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>h});var a=o(91311),s=o(74848),n=o(28453);const i={title:"Automatically deploy new commit to github pages via Travis CI",tags:["web","travis","automation"],date:new Date("2017-01-03T13:24:46.000Z")},r=void 0,l={authorsImageUrls:[]},h=[{value:"Before auto deploy",id:"before-auto-deploy",level:2},{value:"After auto deploy",id:"after-auto-deploy",level:2},{value:"Github page auto deploy to rescue",id:"github-page-auto-deploy-to-rescue",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",mermaid:"mermaid",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{}),"\n",(0,s.jsxs)(t.p,{children:["After  migrated ",(0,s.jsx)(t.a,{href:"/make/hello-world",children:"my blog"})," from blogger to ",(0,s.jsx)(t.a,{href:"https://github.com/gasolin/blog/",children:"github"}),",\nat the end of 2016, I've migrated ",(0,s.jsx)(t.a,{href:"/make/hello-world",children:"my blog"})," and ",(0,s.jsx)(t.a,{href:"http://www.gasolin.idv.tw/",children:"home page"})," to host on ",(0,s.jsx)(t.a,{href:"https://github.com/gasolin/gasolin.github.io",children:"github"})," as well."]}),"\n",(0,s.jsxs)(t.p,{children:["Both sites are fully stored in github and deployed automatically via ",(0,s.jsx)(t.a,{href:"https://travis-ci.org/gasolin/gasolin.github.io",children:"Travis CI"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"before-auto-deploy",children:"Before auto deploy"}),"\n",(0,s.jsx)(t.p,{children:"Before apply auto deploy method, the usual workflow to hosting web page on github are 2 steps:"}),"\n",(0,s.jsx)(t.p,{children:"First, user commit changes to local git master branch."}),"\n",(0,s.jsx)(t.mermaid,{value:"graph LR\nuser(User)\nmaster[Local:master]\nuser -- commits* --\x3e master"}),"\n",(0,s.jsx)(t.p,{children:"Then, user run the build process to generate contents for deploy."}),"\n",(0,s.jsx)(t.mermaid,{value:"graph LR\nuser(User)\ndist[dist/]\nuser -- build --\x3e dist"}),"\n",(0,s.jsxs)(t.p,{children:["Then, use git commands to push generated contents to github ",(0,s.jsx)(t.code,{children:"gh-pages"})," branch"]}),"\n",(0,s.jsx)(t.mermaid,{value:"graph LR\nuser(User)\nghpages[Github:gh-pages]\nuser -- deploy --\x3e ghpages"}),"\n",(0,s.jsx)(t.p,{children:"At this time, our source code is still stored in local machine, we have to push the changes to github as well for safety."}),"\n",(0,s.jsx)(t.mermaid,{value:"graph LR\nuser(User)\nmaster[Github:master]\nuser -- push --\x3e master"}),"\n",(0,s.jsx)(t.p,{children:"Of course the manual works can be improved. After apply auto deploy method, all I have to do is\ncommit to github and let the web services do the rest."}),"\n",(0,s.jsx)(t.h2,{id:"after-auto-deploy",children:"After auto deploy"}),"\n",(0,s.jsx)(t.p,{children:"Here's what my current workflow looks like"}),"\n",(0,s.jsx)(t.mermaid,{value:"graph LR\nmaster[Github:master]\ntravis[Travis CI]\nghpages[Github:gh-pages]\nUser -- commit --\x3e master\nmaster -. auto build .-> travis\ntravis -.  auto deploy .-> ghpages"}),"\n",(0,s.jsx)(t.p,{children:"The dot line process are automatically done for you."}),"\n",(0,s.jsx)(t.h2,{id:"github-page-auto-deploy-to-rescue",children:"Github page auto deploy to rescue"}),"\n",(0,s.jsxs)(t.p,{children:["After auto deploy, I am able to run test, do lint check, and build source with a few changes on ",(0,s.jsx)(t.code,{children:".travis.yml"}),"(The travis configuration file),\n",(0,s.jsx)(t.strong,{children:"the only thing I need to care about is the content"}),".\nThe bonus is github now become my online web page editor. Web page is auto updated after each commit."]}),"\n",(0,s.jsx)(t.p,{children:"All these automation only needs one time setup, which is a pretty good deal to save foreseeable deploy time.\nFor security concern, my current workflow add the github token into Travis environment variables(to let Travis able to commit gh-pages), and make the actual git push quiet to prevent showing the token on Travis."}),"\n",(0,s.jsxs)(t.p,{children:["To not reinvent wheels myself, I distilled the auto deploy scripts and instructions into ",(0,s.jsx)(t.a,{href:"https://github.com/gasolin/ghpage-auto-deploy",children:"ghpage-auto-deploy"})," project.\nyou can use it to deploy your next web page as well."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://github.com/gasolin/ghpage-auto-deploy#fork-destination-box",children:"Fork the ghpage-auto-deploy project"})," to get start, feel free to add new issues to send suggestions or pull request to me if you want to imporove it."]})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},91311(e){e.exports=JSON.parse('{"permalink":"/devtools/ghpage-auto-deploy","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/devtools/ghpage-auto-deploy.md","source":"@site/blog/devtools/ghpage-auto-deploy.md","title":"Automatically deploy new commit to github pages via Travis CI","description":"After  migrated my blog from blogger to github,","date":"2017-01-03T13:24:46.000Z","tags":[{"inline":true,"label":"web","permalink":"/tags/web"},{"inline":true,"label":"travis","permalink":"/tags/travis"},{"inline":true,"label":"automation","permalink":"/tags/automation"}],"readingTime":2.21,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Automatically deploy new commit to github pages via Travis CI","tags":["web","travis","automation"],"date":"2017-01-03T13:24:46.000Z"},"unlisted":false,"prevItem":{"title":"2016\u5e74\uff0c\u6211\u958b\u6e90\u4e86\u54ea\u4e9b\u5c08\u6848(My open source projects in 2016)","permalink":"/make/my-open-source-projects-in-2016"},"nextItem":{"title":"Debugging Firefox Devtools in 2016","permalink":"/ipv6/debugging-firefox-devtools-in-2016"}}')}}]);