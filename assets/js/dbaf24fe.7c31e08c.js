"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[30500],{82851:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>u});var i=l(87462),n=(l(67294),l(3905));l(8209);const a={title:"16.3. \u4f7f\u7528\u65b9\u6cd5",tags:["IPv6"],date:new Date("2005-03-27T00:27:10.000Z")},p=void 0,r={permalink:"/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5",editUrl:"https://github.com/gasolin/blog/edit/main/website/blog/blog/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5.md",source:"@site/blog/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5.md",title:"16.3. \u4f7f\u7528\u65b9\u6cd5",description:"16.3.1\\. \u78ba\u8a8d\u662f\u5426\u652f\u63f4",date:"2005-03-27T00:27:10.000Z",formattedDate:"March 27, 2005",tags:[{label:"IPv6",permalink:"/tags/i-pv-6"}],readingTime:1.355,hasTruncateMarker:!1,authors:[],frontMatter:{title:"16.3. \u4f7f\u7528\u65b9\u6cd5",tags:["IPv6"],date:"2005-03-27T00:27:10.000Z"},prevItem:{title:"3rd. day of porting INET6 \u7b2c\u4e09\u5929",permalink:"/ipv6/3rd-day-of-porting-INET6-\u7b2c\u4e09\u5929"},nextItem:{title:"16.2. \u6e96\u5099",permalink:"/ipv6/16-2-\u6e96\u5099"}},s={authorsImageUrls:[]},u=[{value:"16.3.1. \u78ba\u8a8d\u662f\u5426\u652f\u63f4",id:"1631-\u78ba\u8a8d\u662f\u5426\u652f\u63f4",level:2},{value:"16.3.2. \u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 ip6tables",id:"1632-\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528-ip6tables",level:2},{value:"16.3.2.1. \u5217\u51fa\u6240\u6709 IPv6 netfilter \u8f38\u5165\u689d\u4ef6",id:"16321-\u5217\u51fa\u6240\u6709-ipv6-netfilter-\u8f38\u5165\u689d\u4ef6",level:3},{value:"16.3.2.2. \u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668",id:"16322-\u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668",level:3},{value:"16.3.2.3. \u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247",id:"16323-\u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247",level:3},{value:"16.3.2.4. \u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6",id:"16324-\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6",level:3},{value:"16.3.2.5. \u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6",id:"16325-\u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6",level:3},{value:"16.3.2.6. \u5141\u8a31 ICMPv6 \u8a0a\u606f",id:"16326-\u5141\u8a31-icmpv6-\u8a0a\u606f",level:3},{value:"16.3.2.7. \u901f\u7387\u9650\u5236",id:"16327-\u901f\u7387\u9650\u5236",level:3}],o={toc:u};function d(e){let{components:t,...l}=e;return(0,n.kt)("wrapper",(0,i.Z)({},o,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"1631-\u78ba\u8a8d\u662f\u5426\u652f\u63f4"},"16.3.1","."," \u78ba\u8a8d\u662f\u5426\u652f\u63f4"),(0,n.kt)("p",null," \u5617\u8a66\u8f09\u5165\u6a21\u7d44\uff0c\u78ba\u8a8d\u662f\u5426\u7de8\u8b6f\u6210\u529f"),(0,n.kt)("p",null," ",(0,n.kt)("inlineCode",{parentName:"p"},"# modprobe ip6_tables")),(0,n.kt)("p",null,"\u78ba\u8a8d\u76f8\u5bb9\u6027"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-#",metastring:"[ ! -f /proc/net/ip6_tables_names ] && echo \"Current kernel doesn't support","[":!0,"!":!0,"-f":!0,"/proc/net/ip6_tables_names":!0,"]":!0,"&&":!0,echo:!0,'"Current':!0,kernel:!0,"doesn't":!0,support:!0},"\ufffd 'ip6tables' firewalling (IPv6)!\"\n")),(0,n.kt)("h2",{id:"1632-\u5b78\u7fd2\u5982\u4f55\u4f7f\u7528-ip6tables"},"16.3.2","."," \u5b78\u7fd2\u5982\u4f55\u4f7f\u7528 ip6tables"),(0,n.kt)("h3",{id:"16321-\u5217\u51fa\u6240\u6709-ipv6-netfilter-\u8f38\u5165\u689d\u4ef6"},"16.3.2.1","."," \u5217\u51fa\u6240\u6709 IPv6 netfilter \u8f38\u5165\u689d\u4ef6"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u77ed\u6307\u4ee4")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables -L")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5ef6\u4f38\u6307\u4ee4\n",(0,n.kt)("inlineCode",{parentName:"li"},"ip6tables -n -v --line-numbers -L"))),(0,n.kt)("h3",{id:"16322-\u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668"},"16.3.2.2","."," \u5217\u51fa\u7279\u5b9a\u904e\u6ffe\u5668"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables -n -v --line-numbers -L INPUT")),(0,n.kt)("h3",{id:"16323-\u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247"},"16.3.2.3","."," \u4f7f\u7528\u9078\u9805\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u7d00\u9304\u898f\u5247"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-#",metastring:'ip6tables --table filter --append INPUT  -j LOG --log-prefix "INPUT:"',ip6tables:!0,"--table":!0,filter:!0,"--append":!0,INPUT:!0,"":!0,"-j":!0,LOG:!0,"--log-prefix":!0,'"INPUT:"':!0},"\ufffd --log-level 7\n")),(0,n.kt)("h3",{id:"16324-\u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6"},"16.3.2.4","."," \u5728\u8f38\u5165\u904e\u6ffe\u5668\u4e2d\u63d2\u5165\u62cb\u68c4\u689d\u4ef6"),(0,n.kt)("p",null," ",(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables --table filter --append INPUT  -j DROP")),(0,n.kt)("h3",{id:"16325-\u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6"},"16.3.2.5","."," \u4f9d\u865f\u78bc\u522a\u9664\u4e00\u7b46\u689d\u4ef6"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables --table filter --delete INPUT 1")),(0,n.kt)("h3",{id:"16326-\u5141\u8a31-icmpv6-\u8a0a\u606f"},"16.3.2.6","."," \u5141\u8a31 ICMPv6 \u8a0a\u606f"),(0,n.kt)("p",null,"\u4f7f\u7528\u8f03\u820a\u7684 Linux \u6838\u5fc3 (\u672a\u4fee\u6b63\u7684\u6838\u5fc3 2.4.5 \u8207 iptables-1.2.2) \u5c07\u7121\u6cd5\u6307\u5b9a\u985e\u578b (type)     "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u63a5\u53d7\u900f\u904e\u96a7\u9053 (Tunnel) \u9032\u4f86\u7684 ICMPv6 \u901a\u8a0a ")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables -A INPUT -i sit+ -p icmpv6 -j ACCEPT")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u63a5\u53d7\u900f\u904e\u96a7\u9053 (Tunnel) \u51fa\u53bb\u7684 ICMPv6 \u901a\u8a0a")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables -A OUTPUT -o sit+ -p icmpv6 -j ACCEPT")),(0,n.kt)("p",null,"\u65b0\u7684 Linux \u6838\u5fc3\u53ef\u4ee5\u6307\u5b9a ICMPv6 \u985e\u578b:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"# ip6tables -A INPUT -p icmpv6 --icmpv6-type echo-request -j ACCEPT")),(0,n.kt)("h3",{id:"16327-\u901f\u7387\u9650\u5236"},"16.3.2.7","."," \u901f\u7387\u9650\u5236"),(0,n.kt)("p",null))}d.isMDXComponent=!0}}]);