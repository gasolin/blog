"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3885],{82206:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var n=a(87462),i=(a(67294),a(3905)),r=a(8209);const l={title:"Redux Saga \u771f\u597d\u7528",tags:["react","redux","saga"],date:new Date("2018-10-02T15:49:00.000Z")},d=void 0,s={permalink:"/react-native/redux-saga",editUrl:"https://github.com/gasolin/blog/edit/main/website/blog/blog/react-native/redux-saga.md",source:"@site/blog/react-native/redux-saga.md",title:"Redux Saga \u771f\u597d\u7528",description:"\u6700\u8fd1\u76f8\u7576\u5e38\u4f7f\u7528Redux Saga\uff0c\u7c21\u55ae\u7d00\u9304\u4e00\u4e0b\u3002",date:"2018-10-02T15:49:00.000Z",formattedDate:"October 2, 2018",tags:[{label:"react",permalink:"/tags/react"},{label:"redux",permalink:"/tags/redux"},{label:"saga",permalink:"/tags/saga"}],readingTime:3.375,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Redux Saga \u771f\u597d\u7528",tags:["react","redux","saga"],date:"2018-10-02T15:49:00.000Z"},prevItem:{title:"\u7528Raspberry Pi\u7d44\u88dd\u4e00\u5957\u5c0f\u670b\u53cb\u4f7f\u7528\u7684\u96fb\u8166",permalink:"/tools/raspberrypi-kano-os"},nextItem:{title:"\u500b\u4eba\u5de5\u5177\u7bb12018\u516d\u6708",permalink:"/tools/tooling-in-2018-jun"}},o={authorsImageUrls:[]},p=[{value:"\u57fa\u672cRedux State\u904b\u4f5c",id:"\u57fa\u672credux-state\u904b\u4f5c",level:2},{value:"Redux Saga\u904b\u4f5c",id:"redux-saga\u904b\u4f5c",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}],u={toc:p};function c(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\u6700\u8fd1\u76f8\u7576\u5e38\u4f7f\u7528",(0,i.kt)("a",{parentName:"p",href:"https://redux-saga.js.org/"},"Redux Saga"),"\uff0c\u7c21\u55ae\u7d00\u9304\u4e00\u4e0b\u3002"),(0,i.kt)("p",null,"\u6bd4\u8f03\u5e38\u898b\u7528\u4f86\u8655\u7406 Redux \u975e\u540c\u6b65\u64cd\u4f5c\u7684 Middleware \u6709",(0,i.kt)("inlineCode",{parentName:"p"},"redux-thunk"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"redux-saga"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"redux-observable"),"\u7b49\u3002\u4e4b\u524d\u53c3\u8207\u958b\u767c\u7684",(0,i.kt)("a",{parentName:"p",href:"https://github.com/devtools-html"},"Firefox Devtools"),"\u4f7f\u7528\u7684\u662f\u4fee\u6539\u7248\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"redux-thunk"),"\u3002\u6211\u5728\u5176\u4e2d\u4e00\u500b",(0,i.kt)("a",{parentName:"p",href:"https://github.com/gasolin/transmonitor"},"\u500b\u4eba\u5c08\u6848"),"\u4e2d\u4e5f\u6709\u8a66\u904e",(0,i.kt)("inlineCode",{parentName:"p"},"redux-observable"),"\u3002\u4f7f\u7528 Rxjs \u7684\u611f\u89ba\uff0c\u662f\u6574\u500b\u904e\u53bb\u7684\u958b\u767c\u89c0\u5ff5\u53c8\u88ab\u626d\u6210\u53e6\u4e00\u500b\u5f62\u72c0\ud83d\ude05 \u3002\u56e0\u70ba\u6574\u5957\u958b\u767c\u7684\u89c0\u5ff5\u4e0d\u540c\uff0c\u7576\u5f8c\u7e8c\u60f3\u8981\u4fee\u6539\u6642\u5e38\u5e38\u9047\u5230\u4e00\u4e9b\u554f\u984c\u3002\u76ee\u524d\u5247\u591a\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"redux-saga"),"\u4f86\u8655\u7406\u975e\u540c\u6b65\u76f8\u95dc\u554f\u984c\u3002"),(0,i.kt)("h2",{id:"\u57fa\u672credux-state\u904b\u4f5c"},"\u57fa\u672c Redux State \u904b\u4f5c"),(0,i.kt)("p",null,"\u5148\u7c21\u55ae\u56de\u9867\u4e00\u4e0b\u57fa\u672c\u7684 Redux State \u904b\u4f5c\u3002Redux \u7d71\u4e00\u5132\u5b58\u6240\u6709\u7db2\u9801\u524d\u7aef\u7684\u72c0\u614b (",(0,i.kt)("inlineCode",{parentName:"p"},"State"),")\u3002\u53ea\u80fd\u900f\u904e\u767c\u9001",(0,i.kt)("inlineCode",{parentName:"p"},"Action"),"\u4f86\u901a\u77e5\u72c0\u614b\u7684\u6539\u8b8a\uff0c\u4e26\u900f\u904e",(0,i.kt)("inlineCode",{parentName:"p"},"Reducer"),"\u4fee\u6539\u7576\u524d\u7684\u72c0\u614b\u3002"),(0,i.kt)(r.G,{chart:"graph LR\nReducer{Reducer} -.-> State(State)\nDisptch>Dispatch] -.-> |Action| Reducer",mdxType:"Mermaid"}),(0,i.kt)("p",null,"\u57fa\u672c\u7684 Redux \u50c5\u652f\u63f4\u540c\u6b65\u7684\u64cd\u4f5c\u3002\u82e5\u60f3\u652f\u63f4\u975e\u540c\u6b65\u64cd\u4f5c\uff08promise, async, API \u7b49\uff09\u9700\u8981\u900f\u904e\u52a0\u88dd",(0,i.kt)("inlineCode",{parentName:"p"},"Middleware"),"\u4f86\u8655\u7406\u3002Middleware \u7684\u529f\u7528\uff0c\u662f\u6539\u8b8a\u6536\u5230",(0,i.kt)("inlineCode",{parentName:"p"},"Action"),"\u5f8c\u7684\u8655\u7406\u6d41\u7a0b\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"Redux Saga"),"\u5373\u662f\u5176\u4e2d\u4e00\u7a2e\u529f\u80fd\u5f37\u5927\u7684 Middleware\u3002"),(0,i.kt)("h2",{id:"redux-saga\u904b\u4f5c"},"Redux Saga \u904b\u4f5c"),(0,i.kt)("p",null,"Redux Saga \u7684\u904b\u4f5c\u6a21\u578b\uff0c\u8d77\u59cb\u81ea\u6536\u5230 Action\u3002Saga \u900f\u904e",(0,i.kt)("inlineCode",{parentName:"p"},"takeLatest"),"\u6216",(0,i.kt)("inlineCode",{parentName:"p"},"take"),"\u76e3\u807d\u60f3\u8655\u7406\u7684 Action\uff0c\u4e26\u547c\u53eb\u5c0d\u61c9\u7684 generator function\u3002\u5728 generator function \u4e2d\uff0c\u53ef\u4ee5\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"yield"),"\u8a9e\u53e5\u4f86\u5b8c\u6210\u5404\u7a2e\u975e\u540c\u6b65\u64cd\u4f5c\u3002"),(0,i.kt)("p",null,"\u4f8b\u5982\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"select"),"\u8a9e\u53e5\u4f86\u5f9e\u76ee\u524d\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"State"),"\u4e2d\u53d6\u5f97\u8cc7\u6599\uff0c\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"call"),"\u8a9e\u53e5\u4f86\u547c\u53eb API\uff0c\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"put"),"\u8a9e\u53e5\u4f86\u5c07\u65b0\u7684 Action \u50b3\u56de Redux \u8655\u7406\u3002"),(0,i.kt)(r.G,{chart:"graph LR\nTakeLatest>TakeLatest] -.-> |Action| Saga\nSaga --\x3e|call| API\nAPI --\x3e |await|Saga\nState -.-> select>select]\nselect --\x3e Saga\nPut>Put] -.-> |Action| Reducer\nSaga --\x3e Put",mdxType:"Mermaid"}),(0,i.kt)("p",null,"\u4e00\u6bb5\u7c21\u55ae\u7684\u7bc4\u4f8b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function* handleAction(action) {\n  // get state from state.auth\n  const auth = yield select((state) => state.auth)\n  // async get data. fetchData is the async function.\n  const { result } = yield call((auth) => fetchData(auth))\n  // dispatch action. saveData is the action creator.\n  yield put(actions.saveData(result))\n}\n\nexport default function* rootSaga() {\n  yield takeLatest('ACTION', handleAction)\n}\n")),(0,i.kt)("p",null,"\u628a\u5169\u5f35\u5716\u756b\u5728\u4e00\u8d77\u7684\u8a71\uff0c\u53ef\u4ee5\u770b\u5230 Redux state \u8207 Redux Saga \u4e4b\u9593\u6574\u9ad4\u7684\u547c\u53eb\u95dc\u4fc2\u3002\u4f7f\u7528 Redux/Redux Saga \u80fd\u5c07\u300c\u5f9e UI \u547c\u53eb -> \u53c3\u770b\u73fe\u6709\u72c0\u614b\u4f86\u8207 API \u6e9d\u901a -> \u6839\u64da\u53d6\u56de\u503c\u66f4\u65b0\u72c0\u614b -> \u66f4\u65b0 UI\u300d\u9019\u6a23\u7684\u8907\u96dc\u6d41\u7a0b\uff0c\u6574\u500b\u7c21\u5316\u70ba\u55ae\u5411\u7684\u64cd\u4f5c\u3002"),(0,i.kt)(r.G,{chart:"graph LR\nReducer{Reducer} -.-> State(State)\nDisptch>Dispatch] -.- |Action| TakeLatest>TakeLatest]\nTakeLatest -.-> |Action| Saga\nSaga --\x3e|call| API\nAPI --\x3e |await|Saga\nState -.-> select>select]\nselect --\x3e Saga\nPut>Put] -.-> |Action| Reducer\nSaga --\x3e Put",mdxType:"Mermaid"}),(0,i.kt)("p",null,"\u7576\u7136",(0,i.kt)("inlineCode",{parentName:"p"},"Redux-saga"),"\u9084\u6709\u63d0\u4f9b\u4e00\u4e9b\u5176\u4ed6\u7684\u529f\u80fd\uff0c\u4f46\u5176\u5be6",(0,i.kt)("inlineCode",{parentName:"p"},"Redux-saga"),"\u5c31\u662f\u9019\u9ebc\u7c21\u55ae\u3002\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"Redux-saga"),"\u53ef\u4ee5\u5f88\u597d\u5730\u904b\u7528\u539f\u6709\u7684\u975e\u540c\u6b65\u8655\u7406\u89c0\u5ff5\uff0c\u8981\u5c07 React Component \u4e2d\u76f8\u61c9\u7684\u975e\u540c\u6b65\u51fd\u5f0f\u642c\u51fa\u4f86\uff0c\u4e5f\u4e0d\u50cf",(0,i.kt)("inlineCode",{parentName:"p"},"Redux-observable"),"\u90a3\u6a23\u9700\u8981\u5168\u90e8\u6539\u5beb\u3002"),(0,i.kt)("h2",{id:"\u53c3\u8003\u8cc7\u6599"},"\u53c3\u8003\u8cc7\u6599"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://redux-saga.js.org/"},"https://redux-saga.js.org/")," \u6216 ",(0,i.kt)("a",{parentName:"li",href:"https://redux-saga-in-chinese.js.org"},"https://redux-saga-in-chinese.js.org")," (\u4e2d\u6587)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://bigbitecreative.com/polling-with-redux/"},"Polling with redux")," \u6bd4\u8f03\u4f7f\u7528 Redux-saga \u548c Redux-observable \u5beb polling \u7684\u5dee\u7570")))}c.isMDXComponent=!0}}]);