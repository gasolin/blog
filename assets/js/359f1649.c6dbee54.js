"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[23534],{28453(e,t,r){r.d(t,{R:()=>i,x:()=>c});var o=r(96540);const s={},n=o.createContext(s);function i(e){const t=o.useContext(n);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(n.Provider,{value:t},e.children)}},86625(e){e.exports=JSON.parse('{"permalink":"/devtools/port-hubot-from-Coffescript-to-ES6","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/devtools/port-hubot-from-Coffescript-to-ES6.md","source":"@site/blog/devtools/port-hubot-from-Coffescript-to-ES6.md","title":"\u5c07\u804a\u5929\u6a5f\u5668\u4eba\u6846\u67b6 hubot \u5f9e Coffescript \u79fb\u690d\u5230 ES6","description":"Hubo","date":"2016-03-14T08:31:46.000Z","tags":[{"inline":true,"label":"javascript","permalink":"/tags/javascript"}],"readingTime":4.33,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"\u5c07\u804a\u5929\u6a5f\u5668\u4eba\u6846\u67b6 hubot \u5f9e Coffescript \u79fb\u690d\u5230 ES6","tags":["javascript"],"date":"2016-03-14T08:31:46.000Z"},"unlisted":false,"prevItem":{"title":"How we ported Hubot from Coffeescript to ES6","permalink":"/code/How-we-ported-Hubot-from-Coffeescript-to-ES6"},"nextItem":{"title":"\u4eba\u751f\u5982\u68cb\uff1f\u6216\u5176\u5be6\u4eba\u751f\u66f4\u50cf\u4fc4\u7f85\u65af\u65b9\u584a","permalink":"/life/rubic"}}')},93810(e,t,r){r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>f,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var o=r(86625),s=r(74848),n=r(28453);const i={title:"\u5c07\u804a\u5929\u6a5f\u5668\u4eba\u6846\u67b6 hubot \u5f9e Coffescript \u79fb\u690d\u5230 ES6",tags:["javascript"],date:new Date("2016-03-14T08:31:46.000Z")},c=void 0,a={authorsImageUrls:[]},p=[];function l(e){const t={a:"a",code:"code",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{}),"\n",(0,s.jsxs)(t.p,{children:["(",(0,s.jsx)(t.a,{href:"/code/How-we-ported-Hubot-from-Coffeescript-to-ES6",children:"English Version available here"}),"\uff09"]}),"\n",(0,s.jsxs)(t.p,{children:["\u7528\u5169\u5468\u591a\u7684\u6642\u9593\uff0c\u8def\u8def\u7e8c\u7e8c\u628a\u539f\u672c\u7528 ",(0,s.jsx)(t.a,{href:"http://coffeescript.org/",children:"Coffeescript"})," \u64b0\u5beb\u7684 ",(0,s.jsx)(t.a,{href:"https://github.com/github/hubot",children:"Hubot"})," \u804a\u5929\u6a5f\u5668\u4eba\u6846\u67b6\u79fb\u690d\u6210\u4f7f\u7528\u5230 ES6 \u7279\u6027\u7684\u7d14 Javascript \u7248\u672c\u3002\n\u73fe\u5728\u9019\u500b\u79fb\u690d\u7248\u672c\u5df2\u7d93\u53ef\u4f9b\u4f7f\u7528\u3002\u79fb\u690d\u5f8c\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528 Hubot \u539f\u4f86\u4ee5 Coffeescript \u64b0\u5beb\u7684\u5404\u7a2e\u64f4\u5145\u5957\u4ef6 (Plugins) \u3002\n",(0,s.jsx)(t.a,{href:"https://github.com/gasolin/webbybot",children:"https://github.com/gasolin/webbybot"}),"\n(\u76ee\u524d\u7684\u7248\u672c\u5b8c\u5168\u79fb\u690d Hubot \u7684\u529f\u80fd\uff0c\u5df2\u958b ",(0,s.jsx)(t.a,{href:"https://github.com/github/hubot/issues/1138#issue-138031128",children:"Issue"})," \u8a62\u554f Hubot \u662f\u5426\u6709\u8208\u8da3 merge \u56de\u53bb\uff0c\u5728\u6b64\u4e4b\u524d\u5148\u653e\u5728\u81ea\u5df1\u7684 webbybot repo \u88e1)\n\u79fb\u690d\u7684\u52d5\u6a5f\u4e4b\u4e00\u662f\u70ba\u4e86\u4e86\u89e3\u6574\u500b\u804a\u5929\u6a5f\u5668\u4eba\u6846\u67b6\uff0c\u70ba\u5f8c\u7e8c\u53ef\u80fd\u7684\u4fee\u6539\u6253\u57fa\u790e\u3002\n\u5176\u4e8c\u5247\u662f\u5617\u8a66\u5e73\u5e38\u4e0d\u5e38\u7528\u5230\u7684 ES6 \u65b0\u7279\u6027\u3002\n\u904e\u53bb Coffeescript \u548c ",(0,s.jsx)(t.a,{href:"http://www.typescriptlang.org/",children:"Typescript"})," \u7b49\u6700\u7d42\u7de8\u8b6f\u6210 Javascript \u57f7\u884c\u7684\u8a9e\u8a00\uff0c\u90fd\u8d70\u5728 Javascript \u4e4b\u524d\uff0c\u63d0\u4f9b\u4e86\u8a31\u591a\u8a9e\u6cd5\u4e0a\u7684\u65b0\u7279\u6027\u3002\u4f46\u5728 2015 \u5e74 Javascript \u958b\u59cb\u7684\u65b0\u767c\u4f48\u898f\u5283 (\u4e00\u5e74\u4e00\u7248) \u4e0b\uff0cES6 (ES2015) \u5df2\u5c07 Coffescript \u773e\u591a\u7279\u6027\u90fd\u6536\u7de8\u4e86\u3002\u4e14\u73fe\u5728\u900f\u904e ",(0,s.jsx)(t.a,{href:"http://babeljs.io/",children:"Babel"})," \u53ef\u4ee5\u5c07 ES6 \u7de8\u8b6f\u6210\u73fe\u6709\u7684 Javascript \u76f4\u8b6f\u5668\u80fd\u8b80\u61c2\u7684\u8a9e\u6cd5\u3002\u5728\u9019\u6a23\u7684\u8da8\u52e2\u4e0b\uff0c\u904e\u53bb\u958b\u767c\u8005\u60f3\u70ba\u9019\u4e9b\u65b0\u7279\u6027\u591a\u5b78\u4e00\u5957\u8a9e\u8a00\u7684\u8a98\u56e0\u5c31\u4e0d\u518d\u5b58\u5728\u4e86\u3002\n\u79fb\u690d\u904e\u7a0b\u4e2d\u63a1\u7528\u7684\u4f5c\u6cd5\u8207\u9047\u5230\u4e86\u4e00\u4e9b\u5751\uff0c\u5728\u6b64\u4e00\u4e00\u5217\u51fa\u4f86\u3002\n",(0,s.jsx)(t.strong,{children:"1. \u4e0d\u7528 grunt gulp, \u76f4\u63a5\u4f7f\u7528 npm script"}),'\n\u5728 package.json \u88e1\u53ef\u4ee5\u76f4\u63a5\u5728 "script" \u5c6c\u6027\u4e2d\u5b9a\u7fa9\u4e00\u4e9b\u8981\u57f7\u884c\u7684\u8173\u672c\uff0c\u4f8b\u5982 webbybot \u900f\u904e "npm run build" \u4f86\u5c07 ES6 \u8f49\u63db\u6210 Javascript \u76f4\u8b6f\u5668\u80fd\u8b80\u61c2\u7684\u8a9e\u6cd5\u3002\u7528 \u201cnpm run lint" \u4f86\u505a style check\u3002\n',(0,s.jsx)(t.strong,{children:"2. \u4e0d\u7528 webpack, \u76f4\u63a5\u4f7f\u7528 babel"}),"\n\u79fb\u690d\u4e4b\u521d\u6c7a\u5b9a\u4f7f\u7528 webpack \u7684 babel loader \u4f86\u8f49\u63db ES6\uff0c\u4f46\u9019\u662f\u4e00\u9023\u4e32\u5f9e\u300c\u932f\u8aa4\u4e2d\u5b78\u7fd2\u300d\u7684\u958b\u59cb\u3002 webpack \u652f\u63f4\u4f7f\u7528 require \u547d\u4ee4\u8f09\u5165\u5404\u7a2e\u6a94\u6848\uff0c\u800c\u4e14 webpack \u5728\u8f49\u63db\u7684\u904e\u7a0b\u4e2d\u6703\u5c07\u6a94\u6848\u6253\u5305\u6210\u4e00\u4efd\u3002\u4f46\u5f8c\u7aef\u7a0b\u5f0f\u5176\u5be6\u4e0d\u592a\u9700\u8981\u6253\u5305\uff0c\u800c\u4e14 Hubot \u4f5c\u70ba\u4e00\u500b\u6846\u67b6\uff0c\u57f7\u884c\u5f8c\u5f9e\u5916\u90e8\u8b80\u53d6 Plugin \u662f\u975e\u5e38\u91cd\u8981\u7684\u529f\u80fd\u3002 \u4f7f\u7528 webpack \u6642\uff0c\u5b83\u6703\u5c07\u7a0b\u5f0f\u4e2d\u51fa\u73fe\u7684 require \u90fd\u8996\u70ba\u5b83\u7684 require\uff0c\u800c\u5617\u8a66\u5f9e\u6253\u5305\u597d\u7684\u6a94\u6848\u4e2d\u627e\u5230\u6211\u5011\u9700\u8981\u7684\u5916\u90e8 plugin\uff0c\u7d50\u679c\u662f\u5f92\u52de\u7684\u3002\u7576\u6211\u5011\u63db\u7528 npm script \u76f4\u63a5\u547c\u53eb babel-cli \u4f86\u6253\u5305\uff0c\u539f\u4f86\u4f7f\u7528 webpack \u6642\u51fa\u73fe\u7684\u8af8\u591a\u554f\u984c\u4e5f\u90fd\u4e00\u4f75\u89e3\u6c7a\u4e86\u3002\n",(0,s.jsx)(t.strong,{children:"3. \u8a72\u4e0d\u8a72 return"}),"\n\u5728\u79fb\u690d\u7684\u904e\u7a0b\u4e2d\u5e38\u7528\u5230\u7684\u5de5\u5177\u662f ",(0,s.jsx)(t.a,{href:"http://coffeescript.org/",children:"Coffeescript"}),' \u5b98\u7db2\u7684 "Try Coffeescript" \u5206\u9801\u3002\u53ef\u4ee5\u5373\u6642\u5c07 Coffeescript \u7d50\u679c\u8f49\u63db\u6210 Javascript\u3002 \u4f46\u662f\u771f\u7684\u628a\u7a0b\u5f0f\u78bc\u8cbc\u4e0a\u53bb\u6703\u767c\u73fe\uff0c Coffeescript \u6240\u8f49\u51fa\u4f86\u7684 Javascript \u6240\u6709\u7684\u51fd\u5f0f\u90fd\u6703\u56de\u50b3\u503c\u3002\u9700\u8981\u624b\u5de5\u4e00\u500b\u500b\u78ba\u8a8d\u3002\n',(0,s.jsx)(t.strong,{children:"4. test cases"}),"\nHubot \u672c\u8eab\u6709\u5f88\u5b8c\u6574\u7684\u55ae\u5143\u6e2c\u8a66\u3002\u6240\u4ee5\u6bcf\u79fb\u690d\u4e00\u652f\u7a0b\u5f0f\u78bc\u6642\uff0c\u53ea\u8981\u4e00\u4f75\u79fb\u690d\u5c0d\u61c9\u7684\u55ae\u5143\u6e2c\u8a66\uff0c\u5c31\u53ef\u4ee5\u6349\u5c0d\u62ff\u4f86\u76f4\u63a5\u6e2c\u8a66\u3002\u55ae\u5143\u6e2c\u8a66\u79fb\u690d\u6642\u51fa\u73fe\u6700\u591a\u8a72\u4e0d\u8a72 return \u7684\u554f\u984c\u3002\n",(0,s.jsx)(t.strong,{children:"5. class and super"}),"\nHubot \u4f7f\u7528\u4e86\u5f88\u591a Coffeescript \u7684 Class \u8a9e\u6cd5\u3002Class \u8207 super \u7684\u7528\u6cd5\u5728 ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes",children:"MDN"})," \u4e0a\u53ef\u4ee5\u627e\u5230\u76f8\u95dc\u6559\u5b78\u3002\n",(0,s.jsx)(t.strong,{children:"6. Default + Rest + Spread"}),'\nHubot \u7a0b\u5f0f\u78bc\u88e1\u5e38\u5e38\u6703\u51fa\u73fe\u8af8\u5982 reply (strings...) \u7684\u8a9e\u6cd5\u3002Coffeescript \u88e1\u7684 "strings..." \u53ef\u4ee5\u5c0d\u61c9\u5230 ES6 \u7684 "...strings"\uff08... \u653e\u7f6e\u4f4d\u7f6e\u525b\u597d\u76f8\u53cd\uff09\u3002\n"...strings" \u4ee3\u8868\u7684\u662f\u4e00\u500b\u9663\u5217\u3002\u5728\u7a0b\u5f0f\u4e2d\u6709\u6642\u8981\u5c55\u958b\u6709\u6642\u4e0d\u7528\uff0c\u5176\u5be6\u9817\u4ee4\u4eba\u82e6\u60f1\u3002',(0,s.jsx)(t.strong,{children:"7. \u4f7f\u7528 for..of \u66ff\u63db for.. in \u8ff4\u5708"}),"\n\u78b0\u5230 for..in \u8ff4\u5708\u6709\u5e7e\u7a2e\u89e3\u6cd5\uff0c\u6700\u4e0d\u6703\u51fa\u932f\u7684\u662f\u5c07 Array iteration \u6539\u5beb\u6210 forEach\u3002\u4f46\u662f\u7528 forEach \u02c7\u7684\u8a71\u7121\u6cd5\u5728\u57f7\u884c\u4e2d\u4f7f\u7528 break/return \u8df3\u51fa\u662f\u5176\u7f3a\u9ede\u3002\u5176\u4e8c\u662f\u5728 for..in \u8ff4\u5708\u88e1\u52a0\u5165 hasOwnProperty \u78ba\u8a8d\u4e0d\u6703\u8dd1\u5230\u7121\u95dc\u7684 function\u3002\n\u5728 Webbybot \u7684\u7b2c\u4e8c\u7248\u4e2d\u5df2\u4f7f\u7528 ES6 \u652f\u63f4\u7684 ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of",children:"for..of \u8ff4\u5708"})," \u4f86\u53d6\u4ee3 forEach \u548c for..in \u8ff4\u5708\u3002\u7531\u65bc for..of \u8ff4\u5708\u53ea\u652f\u63f4 iteratable \uff0c\u4e0d\u652f\u63f4\u4e00\u822c Object\uff0c\u6240\u4ee5\u78b0\u5230\u8981\u5c0d Object \u8dd1\u8ff4\u5708\u6642\u53ef\u4ee5\u5728 Object \u5916\u5305\u4e00\u5c64 Object.keys\uff0c\u4f8b\u5982 ",(0,s.jsx)(t.code,{children:"for (let item of Object.keys(TargetObj)) {...}"}),"\n",(0,s.jsx)(t.strong,{children:"8. \u4f7f\u7528 Object.assign \u66ff\u63db Extend"})]}),"\n",(0,s.jsxs)(t.p,{children:["\u8981\u64f4\u5c55\u4e00\u500b\u7269\u4ef6\u7684\u529f\u80fd\u4e0d\u7528\u518d\u7528 lodash \u6216\u662f\u81ea\u5df1\u5beb extend \u51fd\u5f0f\uff0c\u76f4\u63a5\u7528 ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign",children:"Object.assign"})," \u5427\u3002"]}),"\n",(0,s.jsx)(t.p,{children:"\u4ee5\u4e0a\u662f\u79fb\u690d\u904e\u7a0b\u4e2d\u78b0\u4e0a\u7684\u554f\u984c\u3002\u611f\u8b1d\u540c\u4e8b Ray Lin \u4e00\u8d77\u5e6b\u5fd9\u5b8c\u6210\u9019\u6b21\u7684\u79fb\u690d\u3002"}),"\n",(0,s.jsx)(t.p,{children:"\u73fe\u5728 Webbybot (Hubot ES6 port) \u6574\u5957\u90fd\u53ef\u4ee5\u7528 Javascript \u5beb\u4e86\uff0c\u6b61\u8fce\u8a66\u7528\u6216\u4e0a Patch \u5594\u3002"}),"\n",(0,s.jsx)(t.p,{})]})}function f(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);