"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[74993],{10923(e,o,n){n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});var i=n(58751),t=n(74848),r=n(28453);const l={title:"Debugging Firefox Devtools in 2016",tags:["devtools","web"],date:new Date("2016-12-22T11:12:05.000Z")},s=void 0,d={authorsImageUrls:[]},a=[{value:"Remote debugging",id:"remote-debugging",level:2},{value:"Disable autohide in popup",id:"disable-autohide-in-popup",level:3},{value:"Boost build time via set mozconfig artifact",id:"boost-build-time-via-set-mozconfig-artifact",level:3},{value:"Enable React and other JS debugging message",id:"enable-react-and-other-js-debugging-message",level:3},{value:"Open devtools and chrome debugger with website",id:"open-devtools-and-chrome-debugger-with-website",level:3},{value:"Test on Try server",id:"test-on-try-server",level:3},{value:"Tracing Code",id:"tracing-code",level:2},{value:"Via global search in editor",id:"via-global-search-in-editor",level:3},{value:"Via DXR or searchfox",id:"via-dxr-or-searchfox",level:3},{value:"ES6 nits",id:"es6-nits",level:2},{value:"Do not use forEach with yield",id:"do-not-use-foreach-with-yield",level:3},{value:"Try to be functional",id:"try-to-be-functional",level:3},{value:"Misc",id:"misc",level:2}];function c(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.p,{children:["Not like ",(0,t.jsx)(o.a,{href:"/mozilla/The-newbies-workflow-on-Mozilla-Gecko-project",children:"previous article about general workflow on Mozilla Gecko project"}),",\nThis article is like a cookbook that I encountered during debugging Firefox devtools (mostly around inspector and network monitor)."]}),"\n",(0,t.jsx)(o.h2,{id:"remote-debugging",children:"Remote debugging"}),"\n",(0,t.jsxs)(o.p,{children:["According to ",(0,t.jsx)(o.a,{href:"https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Debugging",children:"MDN"}),", first of all you need to go through ",(0,t.jsx)(o.code,{children:"Developer > Toggle Tools > Toolbox Options > Advance settings"})," to check 2 options:"]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Enable browser chrome and add-on debugging toolboxes"}),"\n",(0,t.jsx)(o.li,{children:"Enable remote debugging"}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:["Then use ",(0,t.jsx)(o.code,{children:"Shift+Option+Command+i"})," on Mac or ",(0,t.jsx)(o.code,{children:"Ctrl+Shift+i"})," on linux to open the remote debugger."]}),"\n",(0,t.jsx)(o.h3,{id:"disable-autohide-in-popup",children:"Disable autohide in popup"}),"\n",(0,t.jsx)(o.p,{children:"Once I'm developing toolbar web extensions or any popup windows, I feel very appreciate this feature."}),"\n",(0,t.jsx)(o.p,{}),"\n",(0,t.jsx)(o.h3,{id:"boost-build-time-via-set-mozconfig-artifact",children:"Boost build time via set mozconfig artifact"}),"\n",(0,t.jsxs)(o.p,{children:["Add these settings in ",(0,t.jsx)(o.code,{children:"mozconfig"})," file"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'# Enable debug version of the pre-build binary artifact\nexport MOZ_DEBUG="1"\n\n# Automatically download and use compiled C++ components:\nac_add_options --enable-artifact-builds\n\n# Write build artifacts to:\nmk_add_options MOZ_OBJDIR=./objdir-frontend-debug-artifact\n'})}),"\n",(0,t.jsxs)(o.p,{children:["If you just develop frontend UI(JS, CSS, XUL, HTML), the ",(0,t.jsx)(o.a,{href:"https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Artifact_builds",children:"artifact build"})," prebuild the C++ and the static part of the code so you can download and link it automatically during ",(0,t.jsx)(o.code,{children:"mach build"}),", it saves you tremendous build time and helps you move quicker."]}),"\n",(0,t.jsx)(o.p,{children:"You can use the command"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"./mach build faster\n"})}),"\n",(0,t.jsx)(o.p,{children:"to further boost the build time."}),"\n",(0,t.jsx)(o.h3,{id:"enable-react-and-other-js-debugging-message",children:"Enable React and other JS debugging message"}),"\n",(0,t.jsxs)(o.p,{children:["Add these settings in ",(0,t.jsx)(o.code,{children:"mozconfig"})," file"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.code,{children:"ac_add_options --enable-debug-js-modules"})}),"\n",(0,t.jsx)(o.p,{children:"It will turn on React and other JS debugging message. Note that will influence performance while running."}),"\n",(0,t.jsx)(o.h3,{id:"open-devtools-and-chrome-debugger-with-website",children:"Open devtools and chrome debugger with website"}),"\n",(0,t.jsx)(o.p,{children:"You may not know its possible to open a website with opened devtool with the command:"}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.code,{children:"./mach run --devtools --jsdebugger www.yahoo.com.tw"})}),"\n",(0,t.jsx)(o.h3,{id:"test-on-try-server",children:"Test on Try server"}),"\n",(0,t.jsx)(o.p,{children:"Mozilla Try Server let you run tests on all supported platforms. You can pick which test set and which platform to run by providing command arguments. Here's what I used for test devtools related bugs on Windows, Mac, and Linux."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"try: -b do -p linux64,macosx64,win64 -u mochitest-dt,mochitest-e10s-devtools-chrome -t none --artifact\n"})}),"\n",(0,t.jsxs)(o.p,{children:["Add ",(0,t.jsx)(o.code,{children:"--artifact"})," argument will both save total running time and computing resources."]}),"\n",(0,t.jsx)(o.h2,{id:"tracing-code",children:"Tracing Code"}),"\n",(0,t.jsx)(o.h3,{id:"via-global-search-in-editor",children:"Via global search in editor"}),"\n",(0,t.jsxs)(o.p,{children:["Many modern editor ex sublime, visual studio code provide great support of global search. ",(0,t.jsx)(o.code,{children:"Ctrl + Shift + f"})," is your good friend."]}),"\n",(0,t.jsx)(o.h3,{id:"via-dxr-or-searchfox",children:"Via DXR or searchfox"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.a,{href:"http://dxr.mozilla.org/",children:"DXR"})," and ",(0,t.jsx)(o.a,{href:"http://searchfox.org",children:"searchfox"})," is a code search and navigation tool for large projects like Mozilla-center.\nIt supports full-text and regex searches as well as structural queries."]}),"\n",(0,t.jsx)(o.p,{}),"\n",(0,t.jsx)(o.h2,{id:"es6-nits",children:"ES6 nits"}),"\n",(0,t.jsx)(o.h3,{id:"do-not-use-foreach-with-yield",children:"Do not use forEach with yield"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.code,{children:"forEach"})," is a good way to loop array, but is not compatible with the generator(because the need of implement iterator interface), so if you use ",(0,t.jsx)(o.code,{children:"yield"})," inside of ",(0,t.jsx)(o.code,{children:"forEach"})," loop, it will not behave as you expect.\nThe better choice is use ",(0,t.jsx)(o.code,{children:"for..of"})," loop or ",(0,t.jsx)(o.code,{children:"map"})," instead."]}),"\n",(0,t.jsx)(o.h3,{id:"try-to-be-functional",children:"Try to be functional"}),"\n",(0,t.jsxs)(o.p,{children:["The powerful ",(0,t.jsx)(o.code,{children:"=>"})," arrow syntax sugar is not just for replacing ",(0,t.jsx)(o.code,{children:"bind(this)"}),", it gives the developer a clear way to write more compact code."]}),"\n",(0,t.jsx)(o.p,{children:"For example"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-js",children:"promise.then(function(a , b) {\n  return a + b;\n});\n"})}),"\n",(0,t.jsx)(o.p,{children:"can be written as"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"promise.then((a, b) => a + b);\n"})}),"\n",(0,t.jsx)(o.h2,{id:"misc",children:"Misc"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{}),"\n",(0,t.jsx)(o.li,{}),"\n",(0,t.jsx)(o.li,{}),"\n"]})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,o,n){n.d(o,{R:()=>l,x:()=>s});var i=n(96540);const t={},r=i.createContext(t);function l(e){const o=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:o},e.children)}},58751(e){e.exports=JSON.parse('{"permalink":"/ipv6/debugging-firefox-devtools-in-2016","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/ipv6/debugging-firefox-devtools-in-2016.md","source":"@site/blog/ipv6/debugging-firefox-devtools-in-2016.md","title":"Debugging Firefox Devtools in 2016","description":"Not like previous article about general workflow on Mozilla Gecko project,","date":"2016-12-22T11:12:05.000Z","tags":[{"inline":true,"label":"devtools","permalink":"/tags/devtools"},{"inline":true,"label":"web","permalink":"/tags/web"}],"readingTime":2.93,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Debugging Firefox Devtools in 2016","tags":["devtools","web"],"date":"2016-12-22T11:12:05.000Z"},"unlisted":false,"prevItem":{"title":"Automatically deploy new commit to github pages via Travis CI","permalink":"/devtools/ghpage-auto-deploy"},"nextItem":{"title":"\u500b\u4eba\u5de5\u5177\u7bb12016","permalink":"/tools/tooling-in-2016"}}')}}]);