"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[80749],{10036(e){e.exports=JSON.parse('{"permalink":"/code/test-with-nose","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/code/test-with-nose.md","source":"@site/blog/code/test-with-nose.md","title":"\u4f7f\u7528 nose \u6e2c\u8a66\u5de5\u5177\u7c21\u55ae\u505a\u6e2c\u8a66","description":"\u6954\u5b50","date":"2007-03-04T17:24:14.000Z","tags":[{"inline":true,"label":"aglie test","permalink":"/tags/aglie-test"},{"inline":true,"label":"python","permalink":"/tags/python"},{"inline":true,"label":"TurboGears","permalink":"/tags/turbo-gears"}],"readingTime":4,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"\u4f7f\u7528 nose \u6e2c\u8a66\u5de5\u5177\u7c21\u55ae\u505a\u6e2c\u8a66","tags":["aglie test","python","TurboGears"],"date":"2007-03-04T17:24:14.000Z"},"unlisted":false,"prevItem":{"title":"Python \u793e\u7fa4\u7684 web \u6846\u67b6\u958b\u767c","permalink":"/python/Python-web-frameworks"},"nextItem":{"title":"python \u79aa\u5b78","permalink":"/python/python-zen"}}')},28453(e,n,s){s.d(n,{R:()=>o,x:()=>i});var t=s(96540);const l={},r=t.createContext(l);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},74223(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>a,frontMatter:()=>o,metadata:()=>t,toc:()=>d});var t=s(10036),l=s(74848),r=s(28453);const o={title:"\u4f7f\u7528 nose \u6e2c\u8a66\u5de5\u5177\u7c21\u55ae\u505a\u6e2c\u8a66",tags:["aglie test","python","TurboGears"],date:new Date("2007-03-04T17:24:14.000Z")},i=void 0,c={authorsImageUrls:[]},d=[{value:"\u6954\u5b50",id:"\u6954\u5b50",level:2},{value:"\u8f03\u597d\u7684\u7d04\u5b9a",id:"\u8f03\u597d\u7684\u7d04\u5b9a",level:2},{value:"\u6e2c\u8a66\u9a45\u52d5",id:"\u6e2c\u8a66\u9a45\u52d5",level:2},{value:"\u5176\u4ed6\u7684\u6e2c\u8a66",id:"\u5176\u4ed6\u7684\u6e2c\u8a66",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\u6954\u5b50",children:"\u6954\u5b50"}),"\n",(0,l.jsx)(n.p,{children:'\u81ea\u5f9e\u807d\u8aaa\u4e86\u654f\u6377\u65b9\u6cd5 (Agile programming) \u5f8c\uff0c\u4e00\u76f4\u5f88\u60f3\u8a66\u8a66\u9019\u7a2e "\u6e2c\u8a66\u5148\u884c" \u7684\u958b\u767c\u65b9\u5f0f.\n\u4f46\u662f\u5728 python \u4e0a\u524d\u5f8c\u8a66\u904e unitest, doctest, \u90fd\u4e0d\u5920 "\u7c21\u55ae\u5230\u6703\u60f3\u5e38\u5e38\u62ff\u4f86\u7528" \u7684\u7a0b\u5ea6\uff0c'}),"\n",(0,l.jsx)(n.p,{children:"\u4eca\u5929\u62ff\u4e86\u4e00\u4efd\u539f\u578b\u5beb\u5f97\u5dee\u4e0d\u591a\u7684\u7a0b\u5f0f\uff0c\u8a66\u8457\u5beb\u4e9b\u6e2c\u8a66\u4f8b\u5b50 (test case) \u5f8c\u7528 nose \u6e2c\u8a66\u5de5\u5177\u4f86\u6e2c\u8a66\u770b\u770b\uff0c\u60f3\u4e0d\u5230 nose \u9084\u883b\u5bb9\u6613\u4f7f\u7528\u7684."}),"\n",(0,l.jsx)(n.p,{children:"\u4e09\u6b65\u9a5f\u4f7f\u7528 nose \u958b\u59cb\u6e2c\u8a66"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b89\u88dd\u6216\u66f4\u65b0 nose"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"# easy_install -U nose"})}),"\n",(0,l.jsx)(n.p,{children:"\u6c92\u7528\u904e easy_install ? \u4f60\u8a72\u958b\u59cb\u8a66\u8457\u7528\u4e86\uff01"}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"\u64b0\u5beb\u6e2c\u8a66\u4f8b\u5b50 (test case)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u6253\u958b\u4e00\u500b\u65b0\u7684\u8cc7\u6599\u593e\uff0c\u6211\u5011\u7d71\u4e00\u5728\u9019\u500b\u65b0\u8cc7\u6599\u593e\u88e1\u5beb\u4e3b\u7a0b\u5f0f\u8207\u6e2c\u8a66\u4f8b\u5b50"}),"\n",(0,l.jsx)(n.p,{children:"\u5c07\u8981\u6e2c\u8a66\u7684\u5167\u5bb9\u5beb\u5165 something.py \u9019\u500b\u6a94\u6848 [\u8a3b 1]:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'> class Hello(object):\n>       def  __init__(self):\n>            self.template = "hello world"\n> \n>       def render(self):\n>           return self.template\n'})}),"\n",(0,l.jsx)(n.p,{children:'nose \u6e2c\u8a66\u5de5\u5177\u8b58\u5225\u6e2c\u8a66\u4f8b\u5b50\u7684\u689d\u4ef6\uff0c\u662f\u5224\u65b7\u627e\u5230\u7684\u9019\u500b\u985e\u5225\u6216\u65b9\u6cd5\u7684\u540d\u7a31\u662f\u4e0d\u662f\u4ee5 "test" \u6216 "Test" \u958b\u982d\u3002\u5982\u679c\u662f\u7684\u8a71\u5c31\u7576\u6210\u662f\u6e2c\u8a66\u4f8b\u5b50. nose \u6703\u81ea\u52d5\u641c\u5c0b\u5b50\u76ee\u9304\u4e0b\u6240\u6709\u7b26\u5408\u7684\u6e2c\u8a66\u4f8b\u5b50\uff0c\u4e26\u81ea\u52d5\u958b\u59cb\u6e2c\u8a66.'}),"\n",(0,l.jsx)(n.p,{children:"\u56e0\u6b64\u6211\u5011\u7b2c\u4e00\u500b\u7bc4\u4f8b\u7a0b\u5f0f\u7528\u7684\u6e2c\u8a66\u4f8b\u5b50\u53ea\u8981\u662f\u51fd\u5f0f\u540d\u7a31\u7528 'test' \u958b\u982d\u4f86\u547d\u540d\u5c31\u53ef\u4ee5\u56c9\uff0c\u6211\u5011\u547d\u540d\u4e00\u500b\u6a94\u6848 testsomething.py (\u9019\u500b\u6a94\u6848\u540d\u7a31\u4ee5 test \u958b\u982d\u8207\u8b58\u5225\u6e2c\u8a66\u4f8b\u5b50\u7684\u689d\u4ef6\u4e26\u7121\u95dc\u806f\uff0c\u53ea\u662f\u6163\u4f8b\u4e0a\u653e\u6e2c\u8a66\u7684\u4f8b\u5b50\u7684\u6a94\u540d\u90fd\u6703\u52a0\u4e0a test \u5b57\u6a23), \u4e26\u5728\u88e1\u9762\u5beb\u4e0b:"}),"\n",(0,l.jsx)(n.p,{children:"testsomething.py:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'>\n>     def test_Hello():\n>         abc = Hello()\n>         assert "hello" in abc.render()\n> \n>     def test_foreign():\n>         abc = Hello()\n>         assert "bonjour" not in abc.render()\n'})}),"\n",(0,l.jsx)(n.p,{children:"assert \u662f nose \u7528\u4f86\u5224\u65b7\u6e2c\u8a66\u7d50\u679c\u7684\u8a9e\u6cd5\u3002\u4e3b\u8981\u6709\u9019\u5169\u7a2e:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'assert \u7247\u6bb5 in "\u7d50\u679c"'}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'assert \u7247\u6bb5 not in "\u7d50\u679c"\n\u5c0d\u7167\u4e0a\u9762\u7bc4\u4f8b\uff0c\u53ef\u4ee5\u5f97\u77e5\u4e0a\u9762\u5169\u8005\u7684\u610f\u601d\u5c31\u662f:'}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'\u6e2c\u8a66\u7d50\u679c "hello" \u5b57\u4e32\u61c9\u8a72\u5728 abc.render () \u56de\u61c9\u7684\u7d50\u679c\u88e1'}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'\u6e2c\u8a66\u7d50\u679c "bonjour" \u5b57\u4e32\u61c9\u8a72\u4e0d\u6703\u5728 abc.render () \u56de\u61c9\u7684\u7d50\u679c\u88e1\u5982\u679c\u4e0a\u9762\u4efb\u4e00\u7a2e\u60c5\u6cc1\u4e0d\u7b26\u5408 assert \u6558\u8ff0\uff0c\u9019\u500b\u6e2c\u8a66\u7528\u4f8b\u5c31\u6703\u56de\u5831\u5931\u6557.'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:"\u958b\u59cb\u6e2c\u8a66"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u5207\u63db\u5230\u6a94\u6848\u5728\u7684\u6a94\u6848\u76ee\u9304\u4e0b\uff0c\u8f38\u5165"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"# nosetests"})}),"\n",(0,l.jsx)(n.p,{children:"\u7d50\u679c\u61c9\u8a72\u985e\u4f3c\u9019\u500b\u6a23\u5b50:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"> D:\\path\\pyfile>nosetests\n> ......\n> ----------------------------------------------------------------------\n> Ran 1 tests in 0.020s\n>\n"})}),"\n",(0,l.jsx)(n.p,{children:'OK \u90a3\u9ebc\u5982\u679c\u6211\u5011\u6539\u52d5\u4e86 something.py \u4e2d self.template \u8b8a\u6578\u7684\u5167\u5bb9\uff0c\u5728\u5167\u5bb9\u88e1\u52a0\u4e0a\u4e86 "bonjour" \u5b57\u6a23\uff0c\u6703\u767c\u751f\u4ec0\u9ebc\u4e8b\u60c5\u5462\uff1f'}),"\n",(0,l.jsx)(n.p,{children:"\u6709\u6e2c\u8a66\u5de5\u5177\u7684\u597d\u8655\u5c31\u662f\u6211\u5011\u53ea\u8981\u55ae\u7d14\u5730\u518d\u6b21\u904b\u884c nosetests \u547d\u4ee4\u5c31\u597d\u4e86\uff0c\u4e0d\u7528\u82b1\u8166\u529b\u53bb\u5224\u65b7\u6216\u601d\u8003\uff1a) \u6211\u5011\u67e5\u770b\u8a0a\u606f\u6642\u6703\u770b\u5230\u985e\u4f3c\u4ee5\u4e0b\u7684\u8a0a\u606f:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'> 2, in runTest\n> self.testFunc()\n> File "D:\\path\\pyfile\\testsomething.py", line 90, in test_Hello\n> assert "bonjour" not in abc.render()\n> AssertionError\n> -----------------\n> Ran 1 tests in 0.030s\n> \n> FAILED (failures=1, errors=1)\n>\n'})}),"\n",(0,l.jsx)(n.p,{children:'\u4e0a\u9762\u7684\u5831\u544a\u63d0\u9192\u6211\u5011\u6709\u4e00\u4ef6\u932f\u8aa4: "bonjour" \u5b57\u4e32\u539f\u672c\u4e0d\u61c9\u8a72\u51fa\u73fe\u5728 abc.render () \u56de\u61c9\u7d50\u679c\u4e2d\u7684\uff0c\u4f46\u7d50\u679c\u4e2d\u7adf\u7136\u51fa\u73fe\u4e86\uff01'}),"\n",(0,l.jsx)(n.p,{children:"\u6240\u4ee5\u5982\u679c\u6211\u5011\u7684\u6e2c\u8a66\u7528\u4f8b\u5beb\u7684\u597d\uff0c\u5c31\u53ef\u4ee5\u80af\u5b9a\u6211\u5011\u525b\u525b\u6539\u52d5 something.py \u6642\u51fa\u4e86\u4e9b\u554f\u984c\u3002\u6e2c\u8a66\u9019\u4ef6\u4e8b\u78ba\u5be6\u6709\u6548\uff01"}),"\n",(0,l.jsx)(n.h2,{id:"\u8f03\u597d\u7684\u7d04\u5b9a",children:"\u8f03\u597d\u7684\u7d04\u5b9a"}),"\n",(0,l.jsx)(n.p,{children:'\u6211\u5011\u5df2\u7d93\u77e5\u9053\uff0c\u53ea\u8981\u985e\u5225\u6216\u65b9\u6cd5\u7684\u540d\u7a31\u662f\u4ee5 "test" \u6216 "Test" \u958b\u982d\u3002\u5c31\u6703\u88ab nose \u7576\u6210\u662f\u6e2c\u8a66\u4f8b\u5b50\uff0c\u6240\u4ee5\u5176\u5be6\u5728\u4e00\u500b\u5c0f\u7a0b\u5f0f\u4e2d\uff0c\u6211\u5011\u5927\u53ef\u628a\u6e2c\u8a66\u4f8b\u5b50\u8ddf\u4e3b\u7a0b\u5f0f\u653e\u5728\u540c\u4e00\u500b\u6a94\u6848\u88e1.'}),"\n",(0,l.jsx)(n.p,{children:"\u4f46\u662f\u7576\u4f60\u90fd\u9084\u4e0d\u5f88\u78ba\u5b9a\u4f60\u5728\u5e79\u4ec0\u9ebc\u7684\u6642\u5019\uff0c\u6211\u5efa\u8b70\u9084\u662f\u5c07\u6e2c\u8a66\u4f8b\u5b50\u8ddf\u4e3b\u7a0b\u5f0f\u5206\u958b\u3002\u9019\u9ebc\u505a\u9664\u4e86\u7a0b\u5f0f\u4e0d\u5bb9\u6613\u641e\u6df7\u4e4b\u5916\uff0c\u5728\u5207\u63db\u6a94\u6848\u6642\uff0c\u9084\u53ef\u4ee5\u9806\u4fbf\u5207\u63db\u64b0\u5beb\u7a0b\u5f0f\u8207\u64b0\u5beb\u6e2c\u8a66\u4f8b\u5b50\u6642\u7684\u4e0d\u540c MindSet."}),"\n",(0,l.jsx)(n.h2,{id:"\u6e2c\u8a66\u9a45\u52d5",children:"\u6e2c\u8a66\u9a45\u52d5"}),"\n",(0,l.jsx)(n.p,{children:'\u90a3\u9ebc\u5982\u679c\u6211\u5011\u60f3\u6539\u5beb hello \u51fd\u5f0f\uff0c\u597d\u8b93\u5b83\u53ef\u4ee5\u7528\u6cd5\u8a9e "bonjour" \u6253\u62db\u547c\uff0c\u6211\u5011\u8a72\u600e\u9ebc\u8fa6\uff1f\n\u8a18\u5f97 "\u6e2c\u8a66\u5148\u884c", \u8003\u616e\u52a0\u4e0a\u4e00\u500b\u65b0\u7684\u6e2c\u8a66\u4f8b\u5b50\uff0c\u800c\u4e0d\u5f71\u97ff\u539f\u672c\u7684\u529f\u80fd\u5427\uff01'}),"\n",(0,l.jsx)(n.p,{children:"\u52a0\u5165\u7684\u6e2c\u8a66\u4f8b\u5b50:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:">\n>     def test_bonjour():\n>         abc = Hello('bonjour')\n>         assert \"bonjour\" in abc.render()\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u63a5\u8457\u8981\u505a\u7684\u5c31\u662f\u518d\u8dd1\u4e00\u6b21 nosetests, \u770b\u5230\u9019\u500b\u65b0\u7684\u4f8b\u5b50\u8ddf\u6211\u5011\u5831\u544a\u932f\u8aa4\u4e86. OK, \u90a3\u5c31\u958b\u59cb\u4fee\u6539 hello \u51fd\u5f0f\u5427\uff01[\u8a3b 2]"}),"\n",(0,l.jsx)(n.h2,{id:"\u5176\u4ed6\u7684\u6e2c\u8a66",children:"\u5176\u4ed6\u7684\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.p,{children:'nose \u652f\u63f4\u7684\u6e2c\u8a66\u7684\u65b9\u5f0f\u7433\u746f\u6eff\u76ee\uff0c\u53ef\u4ee5\u4f7f\u7528 "nosetests -h" \u547d\u4ee4\u4f86\u67e5\u770b\u652f\u63f4\u7684\u9805\u76ee.'}),"\n",(0,l.jsxs)(n.p,{children:["\u4f8b\u5982\u53e6\u5916\u4e00\u500b\u5e38\u7528\u7684\u6e2c\u8a66\u65b9\u5f0f\u662f\u4f7f\u7528 doctest:\n",(0,l.jsx)(n.code,{children:"nosetests --with-doctest"})]}),"\n",(0,l.jsxs)(n.p,{children:["\u90a3\u9ebc doctest \u662f\u4ec0\u9ebc\u6a23\u7684\u6e2c\u8a66\u65b9\u5f0f\uff1f\n\u53c8\u8a72\u600e\u9ebc\u4f7f\u7528 doctest \u5462\uff1f\u563f\u563f\uff0c4 \u6708 ",(0,l.jsx)(n.a,{href:"http://osdc.tw/2007/02/post_7.html",children:"OSDC.tw 07"})," \u518d\u958b\u8b1b\u56c9:D"]}),"\n",(0,l.jsx)(n.p,{children:'\u6211\u77e5\u9053\u9019\u500b\u5de5\u5177\u5df2\u7d93\u5feb\u534a\u5e74\u4e86\uff0c\u5230\u4eca\u5929\u624d\u6709\u6642\u9593\uff0c\u52c7\u6c23\u771f\u7684\u4e0b\u53bb\u5617\u8a66.\n\u8b93\u6211\u767d\u767d\u932f\u904e\u9019\u6a23\u597d\u7528\u7684\u5de5\u5177\u9019\u9ebc\u4e45\uff0c\u61c9\u8a72\u602a\u5728 nose \u592a\u5c11\u6587\u4ef6\u53ef\u4ee5\u53c3\u8003\u7684\u982d\u4e0a\u5427\uff1f\n\u4e7e\u8106\u81ea\u5df1\u4f86\u5beb\u500b "\u4e09\u6b65\u9a5f\u4f7f\u7528 nose \u958b\u59cb\u6e2c\u8a66" \u7684\u7c21\u6613\u6587\u4ef6\u597d\u4e86.'}),"\n",(0,l.jsxs)(n.p,{children:["\u8a3b 1: \u9019\u7bc7\u6587\u7ae0\u4e0d\u8b1b\u600e\u9ebc\u5beb python \u7a0b\u5f0f\uff0c\u9019\u90e8\u4efd\u8acb\u81ea\u7406:P\n\u8a3b 2: \u540c\u8a3b 1, \u5efa\u8b70\u59b3\u901b\u901b ",(0,l.jsx)(n.a,{href:"http://www.python.org.tw",children:"www.python.org.tw"})," \u53ef\u4ee5\u770b\u5230\u66f4\u591a\u53c3\u8003\u8cc7\u6599"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);