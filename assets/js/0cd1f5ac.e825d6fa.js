"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[45851],{85066:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>u});var a=o(87462),r=(o(67294),o(3905)),i=o(8209);const l={title:"Automatically deploy new commit to github pages via Travis CI",tags:["web","travis","automation"],date:new Date("2017-01-03T13:24:46.000Z")},s=void 0,n={permalink:"/devtools/ghpage-auto-deploy",editUrl:"https://github.com/gasolin/blog/edit/main/website/blog/blog/devtools/ghpage-auto-deploy.md",source:"@site/blog/devtools/ghpage-auto-deploy.md",title:"Automatically deploy new commit to github pages via Travis CI",description:"After  migrated my blog from blogger to github,",date:"2017-01-03T13:24:46.000Z",formattedDate:"January 3, 2017",tags:[{label:"web",permalink:"/tags/web"},{label:"travis",permalink:"/tags/travis"},{label:"automation",permalink:"/tags/automation"}],readingTime:2.025,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Automatically deploy new commit to github pages via Travis CI",tags:["web","travis","automation"],date:"2017-01-03T13:24:46.000Z"},prevItem:{title:"2016\u5e74\uff0c\u6211\u958b\u6e90\u4e86\u54ea\u4e9b\u5c08\u6848(My open source projects in 2016)",permalink:"/make/my-open-source-projects-in-2016"},nextItem:{title:"Debugging Firefox Devtools in 2016",permalink:"/ipv6/debugging-firefox-devtools-in-2016"}},p={authorsImageUrls:[]},u=[{value:"Before auto deploy",id:"before-auto-deploy",level:2},{value:"After auto deploy",id:"after-auto-deploy",level:2},{value:"Github page auto deploy to rescue",id:"github-page-auto-deploy-to-rescue",level:2}],g={toc:u};function h(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null),(0,r.kt)("p",null,"After  migrated ",(0,r.kt)("a",{parentName:"p",href:"/make/hello-world"},"my blog")," from blogger to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/gasolin/blog/"},"github"),",\nat the end of 2016, I've migrated ",(0,r.kt)("a",{parentName:"p",href:"/make/hello-world"},"my blog")," and ",(0,r.kt)("a",{parentName:"p",href:"http://www.gasolin.idv.tw/"},"home page")," to host on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/gasolin/gasolin.github.io"},"github")," as well."),(0,r.kt)("p",null,"Both sites are fully stored in github and deployed automatically via ",(0,r.kt)("a",{parentName:"p",href:"https://travis-ci.org/gasolin/gasolin.github.io"},"Travis CI"),"."),(0,r.kt)("h2",{id:"before-auto-deploy"},"Before auto deploy"),(0,r.kt)("p",null,"Before apply auto deploy method, the usual workflow to hosting web page on github are 2 steps:"),(0,r.kt)("p",null,"First, user commit changes to local git master branch."),(0,r.kt)(i.G,{chart:"graph LR\nuser(User)\nmaster[Local:master]\nuser -- commits* --\x3e master",mdxType:"Mermaid"}),(0,r.kt)("p",null,"Then, user run the build process to generate contents for deploy."),(0,r.kt)(i.G,{chart:"graph LR\nuser(User)\ndist[dist/]\nuser -- build --\x3e dist",mdxType:"Mermaid"}),(0,r.kt)("p",null,"Then, use git commands to push generated contents to github ",(0,r.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch"),(0,r.kt)(i.G,{chart:"graph LR\nuser(User)\nghpages[Github:gh-pages]\nuser -- deploy --\x3e ghpages",mdxType:"Mermaid"}),(0,r.kt)("p",null,"At this time, our source code is still stored in local machine, we have to push the changes to github as well for safety."),(0,r.kt)(i.G,{chart:"graph LR\nuser(User)\nmaster[Github:master]\nuser -- push --\x3e master",mdxType:"Mermaid"}),(0,r.kt)("p",null,"Of course the manual works can be improved. After apply auto deploy method, all I have to do is\ncommit to github and let the web services do the rest."),(0,r.kt)("h2",{id:"after-auto-deploy"},"After auto deploy"),(0,r.kt)("p",null,"Here's what my current workflow looks like"),(0,r.kt)(i.G,{chart:"graph LR\nmaster[Github:master]\ntravis[Travis CI]\nghpages[Github:gh-pages]\nUser -- commit --\x3e master\nmaster -. auto build .-> travis\ntravis -.  auto deploy .-> ghpages",mdxType:"Mermaid"}),(0,r.kt)("p",null,"The dot line process are automatically done for you."),(0,r.kt)("h2",{id:"github-page-auto-deploy-to-rescue"},"Github page auto deploy to rescue"),(0,r.kt)("p",null,"After auto deploy, I am able to run test, do lint check, and build source with a few changes on ",(0,r.kt)("inlineCode",{parentName:"p"},".travis.yml"),"(The travis configuration file),\n",(0,r.kt)("strong",{parentName:"p"},"the only thing I need to care about is the content"),".\nThe bonus is github now become my online web page editor. Web page is auto updated after each commit."),(0,r.kt)("p",null,"All these automation only needs one time setup, which is a pretty good deal to save foreseeable deploy time.\nFor security concern, my current workflow add the github token into Travis environment variables(to let Travis able to commit gh-pages), and make the actual git push quiet to prevent showing the token on Travis."),(0,r.kt)("p",null,"To not reinvent wheels myself, I distilled the auto deploy scripts and instructions into ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/gasolin/ghpage-auto-deploy"},"ghpage-auto-deploy")," project.\nyou can use it to deploy your next web page as well."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/gasolin/ghpage-auto-deploy#fork-destination-box"},"Fork the ghpage-auto-deploy project")," to get start, feel free to add new issues to send suggestions or pull request to me if you want to imporove it."))}h.isMDXComponent=!0}}]);