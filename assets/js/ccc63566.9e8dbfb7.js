"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[99850],{28453(e,n,t){t.d(n,{R:()=>l,x:()=>o});var i=t(96540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}},34524(e,n,t){t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>a});var i=t(57349),r=t(74848),s=t(28453);const l={title:"16.2. \u6e96\u5099",tags:["IPv6"],date:new Date("2005-03-27T00:26:39.000Z")},o=void 0,p={authorsImageUrls:[]},a=[{value:"16.2.2. \u5c07\u539f\u59cb\u6a94\u89e3\u58d3\u7e2e",id:"1622-\u5c07\u539f\u59cb\u6a94\u89e3\u58d3\u7e2e",level:2},{value:"\u89e3\u58d3\u7e2eiptables \u539f\u59cb\u6a94",id:"\u89e3\u58d3\u7e2eiptables-\u539f\u59cb\u6a94",level:2},{value:"16.2.3. \u5c07\u6700\u65b0 iptables/IPv6-\u76f8\u95dc \u4fee\u6b63\u6a94\u4fee\u6b63\u5230 Linux \u6838\u5fc3\u539f\u59cb\u6a94\u4e0a",id:"1623-\u5c07\u6700\u65b0-iptablesipv6-\u76f8\u95dc-\u4fee\u6b63\u6a94\u4fee\u6b63\u5230-linux-\u6838\u5fc3\u539f\u59cb\u6a94\u4e0a",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"16.2.1. \u53d6\u5f97\u539f\u59cb\u6a94"}),"\n",(0,r.jsxs)(n.p,{children:["\u53d6\u5f97\u6700\u65b0\u7684 Linux \u6838\u5fc3\u539f\u59cb\u6a94: ",(0,r.jsx)(n.a,{href:"http://www.kernel.org/",children:"http://www.kernel.org/"})]}),"\n",(0,r.jsx)(n.p,{children:"\u53d6\u5f97\u6700\u65b0\u7684 iptables \u5957\u4ef6:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Source tarball (kernel \u4fee\u6b63\u6a94\u7528): ",(0,r.jsx)(n.a,{href:"http://www.netfilter.org/",children:"http://www.netfilter.org/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Source RPM for rebuild of binary (for RedHat systems): ",(0,r.jsx)(n.a,{href:"ftp://ftp.redhat.com/redhat/linux/rawhide/SRPMS/SRPMS/",children:"ftp://ftp.redhat.com/redhat/linux/rawhide/SRPMS/SRPMS/"})," or perhaps also at ",(0,r.jsx)(n.a,{href:"http://www.netcore.fi/pekkas/linux/ipv6/",children:"http://www.netcore.fi/pekkas/linux/ipv6/ "})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"1622-\u5c07\u539f\u59cb\u6a94\u89e3\u58d3\u7e2e",children:"16.2.2. \u5c07\u539f\u59cb\u6a94\u89e3\u58d3\u7e2e"}),"\n",(0,r.jsx)(n.p,{children:"\u5207\u63db\u5230\u539f\u59cb\u6a94\u6240\u5728\u76ee\u9304:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"# cd /path/to/src"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5c07\u539f\u59cb\u6a94\u89e3\u958b\u4e26\u66f4\u540d\n",(0,r.jsx)(n.code,{children:"# tar z|jxf kernel-version.tar.gz|bz2"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"# mv linux linux-version-iptables-version+IPv6"})}),"\n",(0,r.jsx)(n.h2,{id:"\u89e3\u58d3\u7e2eiptables-\u539f\u59cb\u6a94",children:"\u89e3\u58d3\u7e2e iptables \u539f\u59cb\u6a94"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"# tar z|jxf iptables-version.tar.gz|bz2"})}),"\n",(0,r.jsx)(n.h2,{id:"1623-\u5c07\u6700\u65b0-iptablesipv6-\u76f8\u95dc-\u4fee\u6b63\u6a94\u4fee\u6b63\u5230-linux-\u6838\u5fc3\u539f\u59cb\u6a94\u4e0a",children:"16.2.3. \u5c07\u6700\u65b0 iptables/IPv6 - \u76f8\u95dc \u4fee\u6b63\u6a94\u4fee\u6b63\u5230 Linux \u6838\u5fc3\u539f\u59cb\u6a94\u4e0a"}),"\n",(0,r.jsx)(n.p,{children:"\u5207\u63db\u5230 iptables \u6240\u5728\u76ee\u9304:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"# cd iptables-version"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528\u4fee\u6b63\u6a94\n",(0,r.jsx)(n.code,{children:"# make pending-patches KERNEL_DIR=/path/to/src/linux-version-iptables-version/ "})]}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u5176\u4ed6 IPv6 \u76f8\u95dc\u4fee\u6b63\u6a94 (\u6838\u5fc3\u5c1a\u672a\u5305\u542b\u7684)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"# make patch-o-matic KERNEL_DIR=/path/to/src/linux-version-iptables-version/"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4ee5\u4e0b\u9078\u9805\u4e2d\u9078\u64c7 yes (iptables-1.2.2)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ah-esp.patch"}),"\n",(0,r.jsx)(n.li,{children:"masq-dynaddr.patch (only needed for systems with dynamic IP assigned WAN connections like PPP or PPPoE)"}),"\n",(0,r.jsx)(n.li,{children:"ipv6-agr.patch.ipv6"}),"\n",(0,r.jsx)(n.li,{children:"ipv6-ports.patch.ipv6"}),"\n",(0,r.jsx)(n.li,{children:"LOG.patch.ipv6"}),"\n",(0,r.jsx)(n.li,{children:"REJECT.patch.ipv6"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u78ba\u8a8d IPv6 extensions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-#",metastring:"make print-extensions",children:"Extensions found: IPv6:owner IPv6:limit IPv6:mac IPv6:multipor\n``\n\n## 16.2.4\\. \u914d\u7f6e, \u5efa\u7acb\u8207\u5b89\u88dd\u65b0 Linux \u6838\u5fc3\n\u5207\u63db\u5230Linux\u6838\u5fc3\u6240\u5728\u76ee\u9304:\n\n`# cd /path/to/src/linux-version-iptables-version/`\n\n\u7de8\u8f2f Makefile\n- EXTRAVERSION =\n+ EXTRAVERSION = -iptables-version+IPv6-try\n\n\u57f7\u884c configure, \u555f\u52d5 IPv6 \u76f8\u95dc\u652f\u63f4\n"})}),"\n",(0,r.jsx)(n.p,{children:"Code maturity level options\nPrompt for development and/or incomplete code/drivers : yes\nNetworking options\nNetwork packet filtering: yes\nThe IPv6 protocol: module\nIPv6: Netfilter Configuration\nIP6 tables support: module\nAll new options like following:\nlimit match support: module\nMAC address match support: module\nMultiple port match support: module\nOwner match support: module\nnetfilter MARK match support: module\nAggregated address check: module\nPacket filtering: module\nREJECT target support: module\nLOG target support: module\nPacket mangling: module\nMARK target support: module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\n\u540c\u6642\u4ea6\u914d\u7f6e\u5176\u4ed6\u8207\u7cfb\u7d71\u76f8\u95dc\u7684\u53c3\u6578. \u5b8c\u6574\u7684\u6838\u5fc3\u7de8\u8b6f\u8207\u5b89\u88dd\u8acb\u53c3\u7167\u5176\u4ed6 HOWTOs\n\n## 16.2.5\\. \u91cd\u65b0\u5efa\u7acb\u8207\u5b89\u88ddiptables binaries\n\n\u78ba\u8a8d\u6838\u5fc3\u539f\u59cb\u78bc\u5df2\u5b58\u5728\u65bc /usr/src/linux/     \n\n\u5c07\u820a\u76ee\u9304\u66f4\u540d\n`# mv /usr/src/linux /usr/src/linux.old`\n\n\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u8edf\u9023\u7d50(softlink)\n\n`# ln -s /path/to/src/linux-version-iptables-version /usr/src/linux`\n\n\u91cd\u65b0\u5efa\u7acb SRPMS\n`# rpm --rebuild /path/to/SRPMS/iptables-version-release.src.rpm`\n\n\u5b89\u88dd\u65b0\u7684 iptables \u5957\u4ef6 (iptables + iptables-ipv6)     \n\n*   \u5728 RH 7.1 \u7cfb\u7d71\u4e0a, \u6b63\u5e38\u72c0\u6cc1\u4e0b\u5df2\u5b89\u88dd\u597d\u820a\u7248\u7684 iptables , \u56e0\u6b64\u6211\u5011"\u66f4\u65b0"\u5b83 \n\n`# rpm -Fhv /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm`\n\n*   \u82e5\u5c1a\u672a\u5b89\u88dd, \u5c31\u5148"\u5b89\u88dd"\u5b83\n\n`# rpm -ihv /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm`\n\n*   On RH 6.2 systems, normally, no kernel 2.4.x is installed, therefore the requirements don\'t fit. Use "--nodeps" to install it \n\n`# rpm -ihv --nodeps /path/to/RPMS/cpu/iptables*-version-release.cpu.rpm`\n\n\u4e5f\u8a31\u9808\u5148\u65b0\u5efa\u4e00\u500b\u8edf\u9023\u7d50\u7d66 iptables \u53c3\u7167\u6a94\n\n`# ln -s /lib/iptables/ /usr/lib/iptables`\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},57349(e){e.exports=JSON.parse('{"permalink":"/ipv6/16-2-\u6e96\u5099","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/ipv6/16-2-\u6e96\u5099.md","source":"@site/blog/ipv6/16-2-\u6e96\u5099.md","title":"16.2. \u6e96\u5099","description":"16.2.1\\\\. \u53d6\u5f97\u539f\u59cb\u6a94","date":"2005-03-27T00:26:39.000Z","tags":[{"inline":true,"label":"IPv6","permalink":"/tags/i-pv-6"}],"readingTime":2.57,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"16.2. \u6e96\u5099","tags":["IPv6"],"date":"2005-03-27T00:26:39.000Z"},"unlisted":false,"prevItem":{"title":"16.3. \u4f7f\u7528\u65b9\u6cd5","permalink":"/ipv6/16-3-\u4f7f\u7528\u65b9\u6cd5"},"nextItem":{"title":"16.1. \u4f7f\u7528 netfilter6 \u4f5c\u9632\u706b\u7246","permalink":"/ipv6/16-1-\u4f7f\u7528-netfilter6-\u4f5c\u9632\u706b\u7246"}}')}}]);