"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[62480],{4219(e){e.exports=JSON.parse('{"permalink":"/ipv6/3rd-day-of-tracing-INET6-Application-UDPBasicApp","editUrl":"https://github.com/gasolin/blog/edit/main/website/blog/blog/ipv6/3rd-day-of-tracing-INET6-Application-UDPBasicApp.md","source":"@site/blog/ipv6/3rd-day-of-tracing-INET6-Application-UDPBasicApp.md","title":"3rd day of tracing INET6: Application/UDPBasicApp","description":"If the dest_addresses parameter contains more than one address,","date":"2005-05-12T03:23:42.000Z","tags":[{"inline":true,"label":"IPv6","permalink":"/tags/i-pv-6"},{"inline":true,"label":"OMNET++","permalink":"/tags/omnet"}],"readingTime":1.4,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"3rd day of tracing INET6: Application/UDPBasicApp","tags":["IPv6","OMNET++"],"date":"2005-05-12T03:23:42.000Z"},"unlisted":false,"prevItem":{"title":"Build an INET Application layer Module: Initial Test","permalink":"/ipv6/Build-an-INET-Application-layer-Module-Initial-Test"},"nextItem":{"title":"12th. day of porting INET6 (Mile Stone: Pre-work Finished)","permalink":"/ipv6/12th-day-of-porting-INET6-Mile-Stone-Pre-work-Finished"}}')},28453(e,n,t){t.d(n,{R:()=>o,x:()=>d});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},38480(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var s=t(4219),r=t(74848),i=t(28453);const o={title:"3rd day of tracing INET6: Application/UDPBasicApp",tags:["IPv6","OMNET++"],date:new Date("2005-05-12T03:23:42.000Z")},d=void 0,a={authorsImageUrls:[]},c=[];function p(e){const n={code:"code",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"If the dest_addresses parameter contains more than one address,\none of them is randomly chosen for each packet."}),"\n",(0,r.jsx)(n.p,{children:"An address may be given in the dotted decimal notation, or with the module name. (The IPAddressResolver class is used to resolve the address.)"}),"\n",(0,r.jsx)(n.p,{children:'To disable the model, set dest_addresses to "".'}),"\n",(0,r.jsx)(n.p,{children:"The peer can be UDPSink or another UDPBasicApp (it handles received packets exactly like UDPSink)."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"UDPAppBase:\n*** void UDPAppBase::bindToPort(int port)"}),"\n",(0,r.jsx)(n.p,{children:'cMessage *msg = new cMessage ("UDP_C_BIND", UDP_C_BIND);\n\u5efa\u7acb\u65b0 message "*msg", \u4f7f\u7528 UDP_C_BIND \u683c\u5f0f'}),"\n",(0,r.jsx)(n.p,{children:'UDPControlInfo *ctrl = new UDPControlInfo ();\n\u5efa\u7acb\u65b0 record "*ctrl"'}),"\n",(0,r.jsx)(n.p,{children:"ctrl->setSrcPort (port);\n\u5c07 port \u53c3\u6578\u8a2d\u5b9a\u9032 ctrl \u7684 SrcPort \u53c3\u6578\u4e2d"}),"\n",(0,r.jsx)(n.p,{children:"msg->setControlInfo (ctrl);\n\u5c07 ctrl \u5305\u9032 msg \u4e2d\u7684 ControlInfo \u53c3\u6578\u4e2d"}),"\n",(0,r.jsx)(n.p,{children:'send (msg, "to_udp");\n\u9001\u5230\u50b3\u8f38\u5c64\u7684 udp \u505a\u8655\u7406'}),"\n",(0,r.jsx)(n.p,{children:"void UDPAppBase::sendToUDP(cMessage *msg, int srcPort, const IPvXAddress& destAddr, int destPort)"}),"\n",(0,r.jsx)(n.p,{children:"msg->setKind(UDP_C_DATA);\nSend message to UDP, with the appropriate control info attached"}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u4ed6\u985e\u4f3c bindToPort ()"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"UDPSink:\nvoid UDPSink::initialize()"}),"\n",(0,r.jsx)(n.p,{children:"WATCH (numReceived);\nTKenv \u4e2d\u986f\u793a numReceived \u8b8a\u6578"}),"\n",(0,r.jsx)(n.p,{children:"if (port!=-1)\nbindToPort (port);\nport \u6578\u5b57\u6b63\u5e38\u5c31\u5c07 port \u53c3\u6578\u7e6b\u7d50\u5230\u57e0\u865f"}),"\n",(0,r.jsx)(n.p,{children:"void UDPSink::handleMessage (cMessage *msg)\n\u8655\u7406\u5c01\u5305\u4e26\u79c0 numReceived \u72c0\u614b\u5728\u756b\u9762\u4e2d"}),"\n",(0,r.jsx)(n.p,{children:"void UDPSink::processPacket (cMessage *msg)\n\u6536\u5230\u5c01\u5305\u5f8c\u522a\u9664\uff0cnumReceived \u6578 +1"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"UDPBaseApp"}),"\n",(0,r.jsx)(n.p,{children:'const char *destAddrs = par ("dest_addresses");\n\u8b80\u5165\u76ee\u7684\u4f4d\u5740\ncStringTokenizer tokenizer (destAddrs);\nconst char *token;\nwhile ((token = tokenizer.nextToken ())!=NULL)\ndestAddresses.push_back (IPAddressResolver ().resolve (token));\n\u89e3\u6790 string \u6210\u53ef\u8fa8\u8b58\u7684\u4f4d\u5740\u683c\u5f0f'}),"\n",(0,r.jsx)(n.p,{children:"void UDPBasicApp::sendPacket ()\nIPvXAddress destAddr = chooseDestAddr ();\n\u8d85\u904e\u4e00\u500b\u76ee\u7684\u4f4d\u5740\u6642\u5f9e\u4e2d\u9078\u64c7\u96a8\u6a5f\u76ee\u7684\u4f4d\u5740"}),"\n",(0,r.jsx)(n.p,{children:"IPvXAddress UDPBasicApp::chooseDestAddr ()\n{\nint k = intrand (destAddresses.size ());\ndestAddresses.size () \u5373\u76ee\u6a19\u4f4d\u5740\u6578\u91cf\uff0cintrand (n) \u5f9e n \u4e2d\u96a8\u6a5f\u53d6\u4e00\u6578"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"return destAddresses[k];\n"})}),"\n",(0,r.jsx)(n.p,{children:"}"})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);